{"success":true,"payload":{"value":{"id":"5abd0668ba3e","versionId":"9b9b4893f0ed","creatorId":"b25029b54709","homeCollectionId":"23738d481ce8","title":"Dart string manipulation done right üëâ","detectedLanguage":"en","latestVersion":"9b9b4893f0ed","latestPublishedVersion":"9b9b4893f0ed","hasUnpublishedEdits":false,"latestRev":1236,"createdAt":1592327983569,"updatedAt":1639533004602,"acceptedAt":0,"firstPublishedAt":1593548758054,"latestPublishedAt":1593552349744,"vote":false,"experimentalCss":"","displayAuthor":"","content":{"subtitle":"Does your app use emojis or support multiple languages? Dart just introduced a new way to safely handle them in string manipulation.","bodyModel":{"paragraphs":[{"name":"be63","type":3,"text":"Dart string manipulation done right üëâ","markups":[]},{"name":"6184","type":1,"text":"Like many other programming languages designed before emojis started to dominate our daily communications and the rise of multilingual support in commercial apps, Dart represents a string as a sequence of UTF-16 code units. The encoding worked fine in most cases, until increased internationalization and the introduction of emojis that go with any language made the encoding‚Äôs inherent problems become everybody‚Äôs problems.","markups":[{"type":3,"start":191,"end":222,"href":"https://api.dart.dev/stable/2.8.4/dart-core/String-class.html","title":"","rel":"","anchorType":0}]},{"name":"c8de","type":1,"text":"Consider this example:","markups":[]},{"name":"d0fa","type":4,"text":"","markups":[],"layout":3,"metadata":{"id":"1*H_-SP7V6x1cQpGM_6DUReg.png","originalWidth":2048,"originalHeight":350,"isFeatured":true,"alt":"The image shows the string ‚ÄúHello‚Äù with a handwaving emoji at the end and it‚Äôs UTF-16 code units. The emoji takes two units."}},{"name":"cefe","type":1,"text":"In the string ‚ÄúHelloüëã‚Äù, each user-perceivable character is mapped to a single code unit except the waving hand emoji üëã. An immediate consequence of this mapping is confusion over the length of this string. Will the output of the following line of code be 6 or 7?","markups":[]},{"name":"d841","type":8,"text":"print('Helloüëã'.length);","markups":[]},{"name":"5887","type":1,"text":"To the user, there are clearly 6 characters in this string unless you get philosophical. But the Dart String API will tell you that the length is 7, or to be precise, 7 UTF-16 code units. This difference has all kinds of ramifications, because so many text manipulation tasks involve using character indexes with the String API. For example, \"Helloüëã\"[5] won‚Äôt return the üëã emoji. Instead it will return a malformed character representing the first code unit of the emoji.","markups":[{"type":10,"start":102,"end":108},{"type":10,"start":136,"end":142},{"type":10,"start":317,"end":323},{"type":10,"start":342,"end":354},{"type":3,"start":136,"end":142,"href":"https://api.dart.dev/stable/dart-core/String/length.html","title":"","rel":"","anchorType":0}]},{"name":"2d08","type":1,"text":"The good news is that Dart has a new package called characters that operates on user-perceivable characters instead of UTF-16 code units. However, you, as a Dart programmer, need to know when to use the characters package. Our research indicates that even experienced Dart programmers can easily miss such problems when reading text manipulation code. In this article, I go over some common scenarios where you need to pay extra attention and consider using the characters package instead of Dart String.","markups":[{"type":10,"start":203,"end":213},{"type":10,"start":462,"end":472},{"type":10,"start":497,"end":503},{"type":3,"start":52,"end":62,"href":"https://pub.dev/packages/characters","title":"","rel":"","anchorType":0},{"type":2,"start":52,"end":62}]},{"name":"8322","type":3,"text":"Scenarios to watch out for","markups":[]},{"name":"476a","type":1,"text":"In this section, I‚Äôll go over a few common text manipulation scenarios, explain why using Dart‚Äôs String API could cause problems in these scenarios, and show how to use the characters package for more reliable results. The use cases below generally assume that we‚Äôre dealing with strings entered by human users, which could include emojis or characters in a language the app developer doesn‚Äôt expect.","markups":[{"type":10,"start":97,"end":103},{"type":10,"start":173,"end":183}]},{"name":"19dd","type":13,"text":"Scenario 1: Counting characters in a string","markups":[]},{"name":"9a68","type":1,"text":"Suppose you‚Äôre writing a function that checks if the text entered by the user has exceeded a specific number of characters. The function returns a positive number of remaining characters if the limit hasn‚Äôt been reached, or a negative number of extra characters if the limit has been exceeded.","markups":[]},{"name":"41f0","type":1,"text":"This is pretty straightforward to do using the String API:","markups":[{"type":10,"start":47,"end":53}]},{"name":"0e3e","type":11,"text":"","markups":[],"layout":1,"iframe":{"mediaResourceId":"6410317e172b58f70eb9656bfcffecae","thumbnailUrl":"https://i.embed.ly/1/image?url=https%3A%2F%2Fgithub.githubassets.com%2Fimages%2Fmodules%2Fgists%2Fgist-og-image.png&key=a19fcc184b9711e1b4764040d3dc5c07"}},{"name":"7ab2","type":1,"text":"However, the following test reveals the problem with this code:","markups":[]},{"name":"d655","type":11,"text":"","markups":[],"layout":1,"iframe":{"mediaResourceId":"18de9b3bf7add8cc5ef46031a7cb4e3d","thumbnailUrl":"https://i.embed.ly/1/image?url=https%3A%2F%2Fgithub.githubassets.com%2Fimages%2Fmodules%2Fgists%2Fgist-og-image.png&key=a19fcc184b9711e1b4764040d3dc5c07"}},{"name":"eb1a","type":1,"text":"Here are the testing results:","markups":[]},{"name":"f2b5","type":8,"text":"Expected: <47>\n  Actual: <46>","markups":[]},{"name":"9102","type":1,"text":"We can rewrite this function using the characters package, which provides a convenient extension method on String, to produce the correct number of characters as follows:","markups":[{"type":10,"start":39,"end":49},{"type":10,"start":107,"end":113}]},{"name":"a71c","type":11,"text":"","markups":[],"layout":1,"iframe":{"mediaResourceId":"718ee2466da5c6c79bed3060aea24739","thumbnailUrl":"https://i.embed.ly/1/image?url=https%3A%2F%2Fgithub.githubassets.com%2Fimages%2Fmodules%2Fgists%2Fgist-og-image.png&key=a19fcc184b9711e1b4764040d3dc5c07"}},{"name":"9ea2","type":13,"text":"Scenario 2: Extracting a substring","markups":[]},{"name":"2399","type":1,"text":"In this scenario, we want to implement a function that deletes the last character from a string and returns the result as a new string. Let‚Äôs assume this string comes from user input.","markups":[]},{"name":"7d7a","type":1,"text":"This function is easy to implement using the substring method on String as follows:","markups":[{"type":10,"start":45,"end":54},{"type":10,"start":65,"end":71}]},{"name":"bc8b","type":11,"text":"","markups":[],"layout":1,"iframe":{"mediaResourceId":"98b6cbbad8b612078ec7a4bd9c24e43e","thumbnailUrl":"https://i.embed.ly/1/image?url=https%3A%2F%2Fgithub.githubassets.com%2Fimages%2Fmodules%2Fgists%2Fgist-og-image.png&key=a19fcc184b9711e1b4764040d3dc5c07"}},{"name":"9bc2","type":1,"text":"However, a good emoji test can quickly break the code:","markups":[]},{"name":"c9c7","type":11,"text":"","markups":[],"layout":1,"iframe":{"mediaResourceId":"bf5c861e58475e7be957bc3dcc0e5d43","thumbnailUrl":"https://i.embed.ly/1/image?url=https%3A%2F%2Fgithub.githubassets.com%2Fimages%2Fmodules%2Fgists%2Fgist-og-image.png&key=a19fcc184b9711e1b4764040d3dc5c07"}},{"name":"ef50","type":1,"text":"Here are the testing results:","markups":[]},{"name":"9d13","type":8,"text":"Expected: ‚ÄòHi ‚Äô\n  Actual: ‚ÄòHi üá©???‚Äô\n    Which: is different. Both strings start the same, but the actual value also has the following trailing characters: üá©???","markups":[]},{"name":"3694","type":1,"text":"The characters package can handle this case with ease, as it provides high-level methods such as skipLast(int count). We can rewrite this snippet into the following code:","markups":[{"type":10,"start":4,"end":14},{"type":10,"start":97,"end":116},{"type":3,"start":97,"end":116,"href":"https://pub.dev/documentation/characters/latest/characters/Characters/skipLast.html","title":"","rel":"","anchorType":0},{"type":2,"start":116,"end":118}]},{"name":"0e2d","type":11,"text":"","markups":[],"layout":1,"iframe":{"mediaResourceId":"0654c324dcfb441f451ab27c7aef923a","thumbnailUrl":"https://i.embed.ly/1/image?url=https%3A%2F%2Fgithub.githubassets.com%2Fimages%2Fmodules%2Fgists%2Fgist-og-image.png&key=a19fcc184b9711e1b4764040d3dc5c07"}},{"name":"925a","type":13,"text":"Scenario 3: Splitting a string on an emoji","markups":[]},{"name":"548f","type":1,"text":"In the third scenario, we want to split a string on a given emoji. Here is a function doing that using the split method on String:","markups":[{"type":10,"start":123,"end":129}]},{"name":"b0a5","type":11,"text":"","markups":[],"layout":1,"iframe":{"mediaResourceId":"b3fe33ec3caac7eb31cb363e2035ebc9","thumbnailUrl":"https://i.embed.ly/1/image?url=https%3A%2F%2Fgithub.githubassets.com%2Fimages%2Fmodules%2Fgists%2Fgist-og-image.png&key=a19fcc184b9711e1b4764040d3dc5c07"}},{"name":"c398","type":1,"text":"Would it work? It probably will work just fine 99% of the time, but the test below illustrates an example where the above code produces rather surprising results.","markups":[]},{"name":"8fdf","type":11,"text":"","markups":[],"layout":1,"iframe":{"mediaResourceId":"5feed1ff4b1e254f2f65e58985bc0e0f","thumbnailUrl":"https://i.embed.ly/1/image?url=https%3A%2F%2Fgithub.githubassets.com%2Fimages%2Fmodules%2Fgists%2Fgist-og-image.png&key=a19fcc184b9711e1b4764040d3dc5c07"}},{"name":"9f48","type":1,"text":"Here are the testing results:","markups":[]},{"name":"5c96","type":8,"text":"Expected: ['abcüë®‚Äçüë©‚Äçüëß‚Äçüë¶', 'abc', 'abc', 'abc']\n  Actual: ['abcüë®‚Äçüë©‚Äç','‚Äçüë¶', 'abc', 'abc', 'abc']\n    Which: was 'abcüë®‚Äçüë©‚Äç' instead of 'abcüë®‚Äçüë©‚Äçüëß‚Äçüë¶' at location [0]","markups":[]},{"name":"f23f","type":1,"text":"So, why did üë®‚Äçüë©‚Äçüëß‚Äçüë¶ become two emojis üë®‚Äçüë© when the string was split? It‚Äôs because üë®‚Äçüë©‚Äçüëß‚Äçüë¶ is actually made of four different emojis: üë®üë©üëßüë¶. When the string was split on üëß, ‚Äúabcüë®‚Äçüë©‚Äçüëß‚Äçüë¶‚Äù got separated into two parts: ‚Äúabcüë®‚Äçüë©‚Äù and ‚Äú‚Äçüë¶‚Äù.","markups":[]},{"name":"e022","type":1,"text":"You can avoid this issue by using the split method on the Characters class, as the following code shows:","markups":[{"type":10,"start":38,"end":43},{"type":10,"start":58,"end":68},{"type":3,"start":38,"end":43,"href":"https://pub.dev/documentation/characters/latest/characters/Characters/split.html","title":"","rel":"","anchorType":0}]},{"name":"434f","type":11,"text":"","markups":[],"layout":1,"iframe":{"mediaResourceId":"5b46ad949913fe2e552b96b9e4c481d6","thumbnailUrl":"https://i.embed.ly/1/image?url=https%3A%2F%2Fgithub.githubassets.com%2Fimages%2Fmodules%2Fgists%2Fgist-og-image.png&key=a19fcc184b9711e1b4764040d3dc5c07"}},{"name":"26cf","type":13,"text":"Scenario 4: Accessing a specific character by its index","markups":[]},{"name":"7930","type":1,"text":"In text manipulation, it‚Äôs common to access a specific character by its index (i.e., position) in the string. For example, the snippet shows a function that returns initials from the first name and the last name entered by the user in two separate text fields:","markups":[]},{"name":"10d3","type":11,"text":"","markups":[],"layout":1,"iframe":{"mediaResourceId":"e371d9b5ab42d9ef00674fbfbe67f1ef","thumbnailUrl":"https://i.embed.ly/1/image?url=https%3A%2F%2Fgithub.githubassets.com%2Fimages%2Fmodules%2Fgists%2Fgist-og-image.png&key=a19fcc184b9711e1b4764040d3dc5c07"}},{"name":"82c4","type":1,"text":"But as we have demonstrated in the beginning of the article, using the index in a UTF-16-based string could be risky. Let‚Äôs verify the correctness of the above code with the test case below:","markups":[]},{"name":"3a7f","type":11,"text":"","markups":[],"layout":1,"iframe":{"mediaResourceId":"3fb7b86271c5acee8ea01595305b650f","thumbnailUrl":"https://i.embed.ly/1/image?url=https%3A%2F%2Fgithub.githubassets.com%2Fimages%2Fmodules%2Fgists%2Fgist-og-image.png&key=a19fcc184b9711e1b4764040d3dc5c07"}},{"name":"ae2d","type":1,"text":"Here are the test results:","markups":[]},{"name":"28d2","type":8,"text":"Expected: ‚ÄòEÃÅB‚Äô\n  Actual: ‚ÄòEB‚Äô\n    Which: is different.","markups":[]},{"name":"de1c","type":1,"text":"Why did the test fail? It‚Äôs because the letter ‚ÄúEÃÅ‚Äù could be a combination of ‚ÄúE‚Äù and the accent mark. You can use the characters package to easily avoid this problem:","markups":[{"type":10,"start":119,"end":129}]},{"name":"9e6e","type":11,"text":"","markups":[],"layout":1,"iframe":{"mediaResourceId":"d12e3814f04779315e029a167f163ab0","thumbnailUrl":"https://i.embed.ly/1/image?url=https%3A%2F%2Fgithub.githubassets.com%2Fimages%2Fmodules%2Fgists%2Fgist-og-image.png&key=a19fcc184b9711e1b4764040d3dc5c07"}},{"name":"f231","type":3,"text":"Exercise: Omitting text overflow","markups":[]},{"name":"3027","type":1,"text":"Now, here‚Äôs a challenge for you. In this scenario, the app needs to display a list of messages, one per line. You‚Äôre asked to review code that implements a function that displays text overflow as an ellipsis when the message‚Äôs length exceeds the given character limit.","markups":[]},{"name":"03fd","type":11,"text":"","markups":[],"layout":1,"iframe":{"mediaResourceId":"b1ac207c4ce81aa6ce5de59c7d12645f","thumbnailUrl":"https://i.embed.ly/1/image?url=https%3A%2F%2Fgithub.githubassets.com%2Fimages%2Fmodules%2Fgists%2Fgist-og-image.png&key=a19fcc184b9711e1b4764040d3dc5c07"}},{"name":"e3bd","type":1,"text":"Can you come up with a test to reveal a potential issue with this code snippet? How would you rewrite it using the characters package? The answer is at the end of this article.","markups":[{"type":10,"start":115,"end":125}]},{"name":"3cd5","type":3,"text":"Mitigations and possible long-term solution","markups":[]},{"name":"b5d7","type":1,"text":"It‚Äôs unreasonable to expect Dart users to stay on high alert for the kinds of pitfalls described above. For example, in an experiment we conducted, 53.7% of Dart users were unable to detect the problem illustrated in the first scenario (counting characters), even though they received two pages of information about the characters package and the problem the package was designed to address just a few minutes before. Therefore, we are taking a two-staged approach to helping developers choose the most appropriate API for their text manipulation needs.","markups":[{"type":10,"start":320,"end":330}]},{"name":"f959","type":1,"text":"In the short term, we are introducing a set of mitigations in the Flutter framework and the Dart analyzer to make the characters package easier to discover and invoke in Dart UI programming. This involves a few steps:","markups":[{"type":10,"start":118,"end":128}]},{"name":"111e","type":10,"text":"Use the characters package in the internal implementation of the TextField widget. See this PR and this design doc for more details.","markups":[{"type":10,"start":8,"end":18},{"type":10,"start":65,"end":74},{"type":3,"start":87,"end":94,"href":"https://github.com/flutter/flutter/pull/53381","title":"","rel":"","anchorType":0},{"type":3,"start":99,"end":114,"href":"https://docs.google.com/document/d/1OOFW0PEZf0orBl445YXJ3nfjyKOqZdmeQ6KU3glUh7s/edit","title":"","rel":"","anchorType":0}]},{"name":"aac9","type":10,"text":"Expose the API of the characters package through the Flutter framework. Once this is done, Flutter users will have a higher chance of discovering the API through the extension method String.characters, which will show up when doing an autocomplete on String. The status of this work is tracked in this issue: https://github.com/flutter/flutter/issues/55593.","markups":[{"type":10,"start":22,"end":32},{"type":10,"start":183,"end":200},{"type":10,"start":251,"end":257},{"type":3,"start":183,"end":200,"href":"https://pub.dev/documentation/characters/latest/characters/StringCharacters.html","title":"","rel":"","anchorType":0},{"type":3,"start":309,"end":356,"href":"https://github.com/flutter/flutter/issues/55593","title":"","rel":"","anchorType":0}]},{"name":"20d9","type":10,"text":"Update the Flutter framework‚Äôs API documentation and sample code to suggest using the Characters class when applicable, such as in the callback for TextField.onChanged. This work is tracked in https://github.com/flutter/flutter/issues/55598 with relevant details in this doc.","markups":[{"type":10,"start":86,"end":96},{"type":10,"start":148,"end":167},{"type":3,"start":86,"end":96,"href":"https://pub.dev/documentation/characters/latest/characters/Characters-class.html","title":"","rel":"","anchorType":0},{"type":3,"start":148,"end":167,"href":"https://api.flutter.dev/flutter/material/TextField/onChanged.html","title":"","rel":"","anchorType":0},{"type":3,"start":193,"end":240,"href":"https://github.com/flutter/flutter/issues/55598","title":"","rel":"","anchorType":0},{"type":3,"start":266,"end":274,"href":"https://docs.google.com/document/d/18SxWeHpds4modnvo997vIOiq01EspeFgsNvPa5ey88w/edit#heading=h.1isiu2jji0ae","title":"","rel":"","anchorType":0}]},{"name":"b894","type":10,"text":"Have the Dart analyzer suggest converting a String object to a Characters object when autocompleting a callback template for handling user-entered text. For example, the IDE could fill out everything in the snippet below after the user autocompletes on onChanged. This work is tracked in https://github.com/dart-lang/sdk/issues/41677.","markups":[{"type":10,"start":44,"end":50},{"type":10,"start":63,"end":73},{"type":10,"start":253,"end":262},{"type":3,"start":288,"end":333,"href":"https://github.com/dart-lang/sdk/issues/41677","title":"","rel":"noopener","anchorType":0}]},{"name":"b67f","type":11,"text":"","markups":[],"layout":1,"iframe":{"mediaResourceId":"9932db108b65a8c3696bd2277e886972","thumbnailUrl":"https://i.embed.ly/1/image?url=https%3A%2F%2Fgithub.githubassets.com%2Fimages%2Fmodules%2Fgists%2Fgist-og-image.png&key=a19fcc184b9711e1b4764040d3dc5c07"}},{"name":"bd3b","type":1,"text":"Those mitigations can help, but they are limited to string manipulations performed in the context of a Flutter project. We need to carefully measure their effectiveness after they become available. A more complete solution at the Dart language level will likely require migration of at least some existing code, although a few options (for example, static extension types) might make breaking changes manageable. More technical investigation is needed to fully understand the trade-offs.","markups":[{"type":3,"start":349,"end":371,"href":"https://github.com/dart-lang/language/issues/42","title":"","rel":"","anchorType":0},{"type":2,"start":373,"end":378}]},{"name":"f20a","type":3,"text":"How you can help","markups":[]},{"name":"f228","type":1,"text":"Please help us raise awareness of how to fix string issues using the characters package:","markups":[{"type":10,"start":69,"end":79}]},{"name":"b5fd","type":9,"text":"Look for instances of using String.length or String.substring in your own code. If the string might have originated from user input, try to rewrite the code using the characters package.","markups":[{"type":10,"start":28,"end":41},{"type":10,"start":45,"end":61},{"type":10,"start":167,"end":177}]},{"name":"1d1c","type":9,"text":"Share this post with others in the Dart community.","markups":[]},{"name":"5521","type":9,"text":"Try to update existing answers about Dart text manipulation on StackOverflow. If the accepted answers missed this limitation of the String API, remind people of the risk.","markups":[{"type":10,"start":132,"end":138},{"type":3,"start":14,"end":59,"href":"https://stackoverflow.com/search?q=%5Bdart%5D+or+%5BFlutter%5D+String","title":"","rel":"","anchorType":0}]},{"name":"f2ae","type":9,"text":"Comment on the GitHub issues listed above to let us know your thoughts and opinions.","markups":[]},{"name":"99ce","type":1,"text":"Now, happy coding üòâ!","markups":[]},{"name":"3f54","type":3,"text":"Acknowledgments","markups":[]},{"name":"1121","type":1,"text":"Thanks to Kathy Walrath, Lasse Nielsen, and Michael Thomson for reviewing this article. I would also like to thank developers who participated in our user research. Their participation helped the Dart and Flutter teams better understand the challenge of dealing with this limitation of the Dart String API.","markups":[{"type":10,"start":295,"end":301},{"type":3,"start":10,"end":23,"href":"https://medium.com/@kathyw_39223","title":"","rel":"","anchorType":0},{"type":3,"start":25,"end":38,"href":"https://medium.com/@lrhn","title":"","rel":"","anchorType":0},{"type":3,"start":44,"end":59,"href":"https://medium.com/@mit.mit","title":"","rel":"","anchorType":0}]},{"name":"3294","type":1,"text":"‚Äî ‚Äî ‚Äî","markups":[]},{"name":"b5ba","type":1,"text":"PS: Here is the solution for the exercise:","markups":[]},{"name":"3f66","type":11,"text":"","markups":[],"layout":1,"iframe":{"mediaResourceId":"d8e1d13b3627140dbcef720a0fa66faf","thumbnailUrl":"https://i.embed.ly/1/image?url=https%3A%2F%2Fgithub.githubassets.com%2Fimages%2Fmodules%2Fgists%2Fgist-og-image.png&key=a19fcc184b9711e1b4764040d3dc5c07"}}],"sections":[{"name":"acb2","startIndex":0}]},"postDisplay":{"coverless":true}},"virtuals":{"statusForCollection":"APPROVED","allowNotes":true,"previewImage":{"imageId":"1*H_-SP7V6x1cQpGM_6DUReg.png","filter":"","backgroundSize":"","originalWidth":2048,"originalHeight":350,"strategy":"resample","height":0,"width":0},"wordCount":1477,"imageCount":1,"readingTime":5.773584905660377,"subtitle":"Does your app use emojis or support multiple languages? Dart just introduced a new way to safely handle them in string manipulation.","userPostRelation":{"userId":"8b6a7f6f197d","postId":"5abd0668ba3e","readAt":0,"readLaterAddedAt":0,"votedAt":0,"collaboratorAddedAt":0,"notesAddedAt":0,"subscribedAt":0,"lastReadSectionName":"","lastReadVersionId":"","lastReadAt":0,"lastReadParagraphName":"","lastReadPercentage":0,"viewedAt":0,"presentedCountInResponseManagement":0,"clapCount":0,"seriesUpdateNotifsOptedInAt":0,"queuedAt":0,"seriesFirstViewedAt":0,"presentedCountInStream":2,"seriesLastViewedAt":0,"audioProgressSec":0},"publishedInCount":1,"usersBySocialRecommends":[],"noIndex":false,"recommends":109,"isBookmarked":false,"tags":[{"slug":"dart","name":"Dart","postCount":13858,"metadata":{"postCount":13858,"coverImage":{"id":"1*rQugDrmwFFsEDL_CqSBJNw.png","originalWidth":1536,"originalHeight":1024,"isFeatured":true}},"type":"Tag"},{"slug":"flutter","name":"Flutter","postCount":43303,"metadata":{"postCount":43303,"coverImage":{"id":"1*8zlpgRA1agpvWp-OiFKlJw.png","originalWidth":1536,"originalHeight":1024,"isFeatured":true}},"type":"Tag"},{"slug":"programming-languages","name":"Programming Languages","postCount":14860,"metadata":{"postCount":14860,"coverImage":{"id":"1*sD09-ccQCGBvaNKvzpbTbw.png","originalWidth":1690,"originalHeight":964,"isFeatured":true}},"type":"Tag"},{"slug":"string-manipulation","name":"String Manipulation","postCount":270,"metadata":{"postCount":270,"coverImage":{"id":"1*Q0SndjhevBYIVdiSeLtckg.png","originalWidth":1824,"originalHeight":1384,"isFeatured":true}},"type":"Tag"},{"slug":"developer-experience","name":"Developer Experience","postCount":1753,"metadata":{"postCount":1753,"coverImage":{"id":"1*i2_U-fhYaucmNUCb5NRTnQ.jpeg","originalWidth":1536,"originalHeight":1024,"isFeatured":true}},"type":"Tag"}],"socialRecommendsCount":0,"responsesCreatedCount":2,"links":{"entries":[{"url":"https://stackoverflow.com/search?q=%5Bdart%5D+or+%5BFlutter%5D+String","alts":[],"httpStatus":200},{"url":"https://pub.dev/packages/characters","alts":[],"httpStatus":200},{"url":"https://pub.dev/documentation/characters/latest/characters/Characters-class.html","alts":[],"httpStatus":200},{"url":"https://pub.dev/documentation/characters/latest/characters/Characters/split.html","alts":[],"httpStatus":200},{"url":"https://pub.dev/documentation/characters/latest/characters/Characters/skipLast.html","alts":[],"httpStatus":200},{"url":"https://api.flutter.dev/flutter/material/TextField/onChanged.html","alts":[],"httpStatus":200},{"url":"https://pub.dev/documentation/characters/latest/characters/StringCharacters.html","alts":[],"httpStatus":200},{"url":"https://api.dart.dev/stable/dart-core/String/length.html","alts":[],"httpStatus":200},{"url":"https://api.dart.dev/stable/2.8.4/dart-core/String-class.html","alts":[],"httpStatus":200},{"url":"https://medium.com/@lrhn","alts":[{"type":2,"url":"medium://@lrhn"},{"type":3,"url":"medium://@lrhn"}],"httpStatus":200},{"url":"https://github.com/dart-lang/sdk/issues/41677","alts":[],"httpStatus":200},{"url":"https://docs.google.com/document/d/18SxWeHpds4modnvo997vIOiq01EspeFgsNvPa5ey88w/edit#heading=h.1isiu2jji0ae","alts":[],"httpStatus":200},{"url":"https://github.com/flutter/flutter/issues/55598","alts":[],"httpStatus":200},{"url":"https://medium.com/@kathyw_39223","alts":[{"type":2,"url":"medium://@kathyw_39223"},{"type":3,"url":"medium://@kathyw_39223"}],"httpStatus":200},{"url":"https://github.com/flutter/flutter/issues/55593","alts":[],"httpStatus":200},{"url":"https://medium.com/@mit.mit","alts":[{"type":3,"url":"medium://@mit.mit"},{"type":2,"url":"medium://@mit.mit"}],"httpStatus":200},{"url":"https://docs.google.com/document/d/1OOFW0PEZf0orBl445YXJ3nfjyKOqZdmeQ6KU3glUh7s/edit","alts":[],"httpStatus":200},{"url":"https://github.com/dart-lang/language/issues/42","alts":[],"httpStatus":200},{"url":"https://github.com/flutter/flutter/pull/53381","alts":[],"httpStatus":200}],"version":"0.3","generatedAt":1593552353085},"isLockedPreviewOnly":false,"metaDescription":"","totalClapCount":634,"sectionCount":1,"readingList":0,"topics":[{"topicId":"decb52b64abf","slug":"programming","createdAt":1493934116328,"deletedAt":0,"image":{"id":"1*iPa136b1cGEO7lvoXg6uHQ@2x.jpeg","originalWidth":6016,"originalHeight":4016},"name":"Programming","description":"The good, the bad, the buggy.","relatedTopics":[],"visibility":1,"relatedTags":[],"relatedTopicIds":[],"seoTitle":"Programming News and Articles‚Ää‚Äî‚ÄäMedium","type":"Topic"}]},"coverless":true,"slug":"dart-string-manipulation-done-right","translationSourcePostId":"","translationSourceCreatorId":"","isApprovedTranslation":false,"inResponseToPostId":"","inResponseToRemovedAt":0,"isTitleSynthesized":false,"allowResponses":true,"importedUrl":"","importedPublishedAt":0,"visibility":0,"uniqueSlug":"dart-string-manipulation-done-right-5abd0668ba3e","previewContent":{"bodyModel":{"paragraphs":[{"name":"previewImage","type":4,"text":"","layout":10,"metadata":{"id":"1*H_-SP7V6x1cQpGM_6DUReg.png","originalWidth":2048,"originalHeight":350,"isFeatured":true,"alt":"The image shows the string ‚ÄúHello‚Äù with a handwaving emoji at the end and it‚Äôs UTF-16 code units. The emoji takes two units."}},{"name":"previewTitle","type":3,"text":"Dart string manipulation done right üëâ","alignment":1},{"name":"previewSubtitle","type":13,"text":"Does your app use emojis or support multiple languages? Dart‚Ä¶","alignment":1}],"sections":[{"startIndex":0}]},"isFullContent":false,"subtitle":"Does your app use emojis or support multiple languages? Dart just introduced a new way to safely handle them in string manipulation."},"license":0,"inResponseToMediaResourceId":"","canonicalUrl":"https://blog.dart.dev/dart-string-manipulation-done-right-5abd0668ba3e","approvedHomeCollectionId":"23738d481ce8","isNewsletter":false,"newsletterId":"","webCanonicalUrl":"https://blog.dart.dev/dart-string-manipulation-done-right-5abd0668ba3e","mediumUrl":"https://blog.dart.dev/dart-string-manipulation-done-right-5abd0668ba3e","migrationId":"","notifyFollowers":true,"notifyTwitter":false,"notifyFacebook":false,"responseHiddenOnParentPostAt":0,"isSeries":false,"isSubscriptionLocked":false,"seriesLastAppendedAt":0,"audioVersionDurationSec":0,"sequenceId":"","isEligibleForRevenue":false,"isBlockedFromHightower":false,"deletedAt":0,"lockedPostSource":0,"hightowerMinimumGuaranteeStartsAt":0,"hightowerMinimumGuaranteeEndsAt":0,"featureLockRequestAcceptedAt":0,"mongerRequestType":1,"layerCake":3,"socialTitle":"","socialDek":"","editorialPreviewTitle":"","editorialPreviewDek":"","curationEligibleAt":0,"primaryTopic":{"topicId":"decb52b64abf","slug":"programming","createdAt":1493934116328,"deletedAt":0,"image":{"id":"1*iPa136b1cGEO7lvoXg6uHQ@2x.jpeg","originalWidth":6016,"originalHeight":4016},"name":"Programming","description":"The good, the bad, the buggy.","relatedTopics":[],"visibility":1,"relatedTags":[],"relatedTopicIds":[],"seoTitle":"Programming News and Articles‚Ää‚Äî‚ÄäMedium","type":"Topic"},"primaryTopicId":"decb52b64abf","isProxyPost":false,"proxyPostFaviconUrl":"","proxyPostProviderName":"","proxyPostType":0,"isSuspended":false,"isLimitedState":false,"seoTitle":"","previewContent2":{"bodyModel":{"paragraphs":[{"name":"be63","type":3,"text":"Dart string manipulation done right üëâ","markups":[]},{"name":"6184","type":1,"text":"Like many other programming languages designed before emojis started to dominate our daily communications and the rise of multilingual support in commercial apps, Dart represents a string as a sequence of UTF-16 code units. The encoding worked fine in most cases, until increased internationalization and the introduction of emojis that‚Ä¶","markups":[{"type":3,"start":191,"end":222,"href":"https://api.dart.dev/stable/2.8.4/dart-core/String-class.html","title":"","rel":"","anchorType":0}]}],"sections":[{"name":"acb2","startIndex":0}]},"isFullContent":false,"subtitle":"Does your app use emojis or support multiple languages? Dart just introduced a new way to safely handle them in string manipulation."},"cardType":0,"isDistributionAlertDismissed":false,"isShortform":false,"shortformType":0,"responsesLocked":false,"isLockedResponse":false,"isPublishToEmail":false,"responseDistribution":0,"isMarkedPaywallOnly":false,"type":"Post"},"mentionedUsers":[],"collaborators":[{"user":{"userId":"fe67f3a27347","name":"Kathy Walrath","username":"kathyw_39223","createdAt":1479149074481,"imageId":"0*OWxJ0V46ratF_z-r.","backgroundImageId":"","bio":"I write Dart docs! https://dart.dev","twitterScreenName":"","allowNotes":1,"mediumMemberAt":0,"isWriterProgramEnrolled":true,"isSuspended":false,"isMembershipTrialEligible":true,"facebookDisplayName":"","optInToIceland":true,"userFlags":[2],"hasCompletedProfile":false,"userDismissableFlags":[1,2,5,8,12],"hasSeenIcelandOnboarding":false,"postSubscribeMembershipUpsellShownAt":0,"languageCode":"en-us","type":"User"},"state":"visible"}],"hideMeter":false,"shareKey":"325239cfb636e6f1306523f4612ff5bc","collectionUserRelations":[{"collectionId":"23738d481ce8","userId":"8b6a7f6f197d","role":"ADMIN"},{"collectionId":"4da7dfd21a33","userId":"8b6a7f6f197d","role":"WRITER"},{"collectionId":"24d8f4fa8912","userId":"8b6a7f6f197d","role":"WRITER"}],"mode":"canEdit","references":{"User":{"b25029b54709":{"userId":"b25029b54709","name":"Tao Dong","username":"taodong","createdAt":1379981270728,"imageId":"0*jbYlQ-K9Yh-HVUBp.jpg","backgroundImageId":"","bio":"I‚Äôm a HCI researcher and UX Lead focused on applying AI to the full lifecycle of software engineering. Personal website: https://www.taodong.net/.","twitterScreenName":"taodong","socialStats":{"userId":"b25029b54709","usersFollowedCount":191,"usersFollowedByCount":1301,"type":"SocialStats"},"social":{"userId":"8b6a7f6f197d","targetUserId":"b25029b54709","type":"Social"},"allowNotes":1,"mediumMemberAt":0,"isWriterProgramEnrolled":true,"isSuspended":false,"isMembershipTrialEligible":true,"facebookDisplayName":"","optInToIceland":true,"subdomainCreatedAt":1643140339365,"hasCompletedProfile":false,"userDismissableFlags":[1,2,3,5,8,12,29,47,58],"hasSeenIcelandOnboarding":true,"postSubscribeMembershipUpsellShownAt":0,"languageCode":"en-us","type":"User"}},"Collection":{"23738d481ce8":{"id":"23738d481ce8","name":"Dart","slug":"dartlang","tags":["MOBILE APP DEVELOPMENT","WEB DEVELOPMENT","DART","PROGRAMMING LANGUAGES","SOFTWARE DEVELOPMENT"],"creatorId":"a6d788faa5e5","description":"Dart is an approachable, portable, and productive language for high-quality apps on any platform. Learn more at https://dart.dev.","shortDescription":"Dart is an approachable, portable, and productive language‚Ä¶","image":{"imageId":"1*uWy1Ajpd0oTUQBO9WBHoQg@2x.png","filter":"","backgroundSize":"","originalWidth":1001,"originalHeight":1001,"strategy":"resample","height":0,"width":0},"metadata":{"followerCount":14031,"activeAt":1762974121956},"virtuals":{"permissions":{"canPublish":true,"canPublishAll":true,"canRepublish":true,"canRemove":true,"canManageAll":true,"canSubmit":true,"canEditPosts":true,"canAddWriters":true,"canViewStats":true,"canSendNewsletter":true,"canViewLockedPosts":true,"canViewCloaked":true,"canEditOwnPosts":true,"canBeAssignedAuthor":true,"canEnrollInHightower":false,"canLockPostsForMediumMembers":false,"canLockOwnPostsForMediumMembers":false,"canViewNewsletterV2Stats":true,"canCreateNewsletterV3":true},"isSubscribed":true,"isEnrolledInHightower":false,"isEligibleForHightower":false,"isSubscribedToCollectionEmails":false,"isMuted":false,"canToggleEmail":false,"isWriter":false},"logo":{"imageId":"1*NRb7RFVWJQFzY47j3v4U7Q.png","filter":"","backgroundSize":"","originalWidth":400,"originalHeight":154,"strategy":"resample","height":0,"width":0},"twitterUsername":"dart_lang","publicEmail":"medium@dartlang.org","domain":"blog.dart.dev","sections":[{"type":2,"collectionHeaderMetadata":{"title":"Dart","description":"An approachable, portable, and productive language for high-quality apps on any platform","backgroundImage":{},"logoImage":{"id":"1*knHF_qpxdtS8h0Z8EeqowA@2x.png","originalWidth":1080,"originalHeight":1080,"alt":"Dart"},"alignment":2,"layout":5}},{"type":1,"postListMetadata":{"source":1,"layout":4,"number":7,"postIds":[]}},{"type":1,"postListMetadata":{"source":1,"layout":5,"number":15,"postIds":[]}}],"tintColor":"#FF042B59","lightText":true,"favicon":{"imageId":"","filter":"","backgroundSize":"","originalWidth":0,"originalHeight":0,"strategy":"resample","height":0,"width":0},"colorPalette":{"defaultBackgroundSpectrum":{"colorPoints":[{"color":"#FF6588BA","point":0},{"color":"#FF607EAB","point":0.1},{"color":"#FF59759C","point":0.2},{"color":"#FF536B8E","point":0.3},{"color":"#FF4C617F","point":0.4},{"color":"#FF445670","point":0.5},{"color":"#FF3D4B61","point":0.6},{"color":"#FF344052","point":0.7},{"color":"#FF2B3442","point":0.8},{"color":"#FF212832","point":0.9},{"color":"#FF161A22","point":1}],"backgroundColor":"#FFFFFFFF"},"tintBackgroundSpectrum":{"colorPoints":[{"color":"#FF042B59","point":0},{"color":"#FF294871","point":0.1},{"color":"#FF456087","point":0.2},{"color":"#FF5F779B","point":0.3},{"color":"#FF788DAD","point":0.4},{"color":"#FF8FA2BF","point":0.5},{"color":"#FFA5B6CF","point":0.6},{"color":"#FFBBC9DF","point":0.7},{"color":"#FFD1DCEE","point":0.8},{"color":"#FFE6EEFC","point":0.9},{"color":"#FFFBFFFF","point":1}],"backgroundColor":"#FF042B59"},"highlightSpectrum":{"colorPoints":[{"color":"#FFECF3FF","point":0},{"color":"#FFE9F2FF","point":0.1},{"color":"#FFE5F0FF","point":0.2},{"color":"#FFE2EFFF","point":0.3},{"color":"#FFDEEDFF","point":0.4},{"color":"#FFDBEBFF","point":0.5},{"color":"#FFD7EAFF","point":0.6},{"color":"#FFD3E8FF","point":0.7},{"color":"#FFCFE6FF","point":0.8},{"color":"#FFCBE5FF","point":0.9},{"color":"#FFC8E3FF","point":1}],"backgroundColor":"#FFFFFFFF"},"darkBackgroundSpectrum":{"colorPoints":[{"color":"#FF7DA0D3","point":0},{"color":"#FF89A9D8","point":0.1},{"color":"#FF94B1DC","point":0.2},{"color":"#FFA0B9E0","point":0.3},{"color":"#FFABC1E3","point":0.4},{"color":"#FFB6C9E7","point":0.5},{"color":"#FFC0D1EB","point":0.6},{"color":"#FFCBD8EF","point":0.7},{"color":"#FFD5E0F2","point":0.8},{"color":"#FFE0E7F6","point":0.9},{"color":"#FFEAEFFA","point":1}],"backgroundColor":"#FF000000"}},"navItems":[{"type":1,"title":"Announcements","tagSlug":"announcements","url":"https://blog.dart.dev/tagged/announcements","source":"tagSlug"},{"type":5,"title":"Archive","url":"https://blog.dart.dev/archive"},{"type":3,"title":"dart.dev","url":"https://dart.dev"}],"colorBehavior":2,"collectionFeatures":[25],"ampLogo":{"imageId":"","filter":"","backgroundSize":"","originalWidth":0,"originalHeight":0,"strategy":"resample","height":0,"width":0},"header":{"title":"Dart","description":"An approachable, portable, and productive language for high-quality apps on any platform","backgroundImage":{},"logoImage":{"id":"1*knHF_qpxdtS8h0Z8EeqowA@2x.png","originalWidth":1080,"originalHeight":1080,"alt":"Dart"},"alignment":2,"layout":5},"subscriberCount":14031,"tagline":"Dart is a client-optimized language for fast apps on any platform.","isOptedIntoAurora":false,"isCurationAllowedByDefault":false,"polarisCoverImage":{"imageId":"","filter":"","backgroundSize":"","originalWidth":0,"originalHeight":0,"strategy":"resample","height":0,"width":0},"ptsQualifiedAt":1616092887098,"type":"Collection"}},"Social":{"b25029b54709":{"userId":"8b6a7f6f197d","targetUserId":"b25029b54709","type":"Social"}},"SocialStats":{"b25029b54709":{"userId":"b25029b54709","usersFollowedCount":191,"usersFollowedByCount":1301,"type":"SocialStats"}}}},"v":3,"b":"20260130-1005-root"}
{"success":true,"payload":{"value":{"id":"f4b3101f146c","versionId":"ccce34aa4a8","creatorId":"a6d788faa5e5","homeCollectionId":"23738d481ce8","title":"Dart 2.18: Objective-C & Swift interop","detectedLanguage":"en","latestVersion":"ccce34aa4a8","latestPublishedVersion":"ccce34aa4a8","hasUnpublishedEdits":false,"latestRev":785,"createdAt":1661261754403,"updatedAt":1682598770655,"acceptedAt":0,"firstPublishedAt":1661883664704,"latestPublishedAt":1682598770655,"vote":false,"experimentalCss":"","displayAuthor":"","content":{"subtitle":"Enhanced interoperability, platform-specific networking, improved type inference, and an important update on our null safety language…","bodyModel":{"paragraphs":[{"name":"d57a","type":3,"text":"Dart 2.18: Objective-C & Swift interop","markups":[]},{"name":"87dc","type":13,"text":"Enhanced interoperability, platform-specific networking, improved type inference, and an important update on our null safety language roadmap","markups":[]},{"name":"3241","type":1,"text":"Dart 2.18 is available today. This release features a preview of Objective-C & Swift interoperability and a new iOS/macOS networking package built on top of this interop. It also contains improved type inference for generic functions, performance improvements to async code, new pub.dev features, and cleanup of our tools and core libraries.","markups":[{"type":2,"start":0,"end":341}]},{"name":"a4dd","type":1,"text":"Finally, we have the latest null safety migration status numbers and an important roadmap update on our path towards a fully null safe Dart. Please read to the end!","markups":[{"type":2,"start":0,"end":164}]},{"name":"1067","type":4,"text":"","markups":[],"layout":1,"metadata":{"id":"0*byFoNx1wnEaO0S6N","originalWidth":1600,"originalHeight":477,"isFeatured":true}},{"name":"9978","type":3,"text":"Introducing Dart to Objective-C & Swift interop","markups":[]},{"name":"8a93","type":1,"text":"We previewed the Dart foreign function interface (FFI) for calling native C APIs in 2020 and released it in Dart 2.12 in March 2021. Since that release, a large selection of packages have taken advantage of this feature to integrate with existing native C APIs. A few examples include file_picker, printing, win32, objectbox, realm, isar, tflite_flutter, and dbus.","markups":[{"type":10,"start":285,"end":296},{"type":10,"start":298,"end":306},{"type":10,"start":308,"end":313},{"type":10,"start":315,"end":324},{"type":10,"start":326,"end":331},{"type":10,"start":333,"end":337},{"type":10,"start":339,"end":353},{"type":10,"start":359,"end":363},{"type":3,"start":285,"end":296,"href":"https://pub.dev/packages/file_picker","title":"","rel":"","anchorType":0},{"type":3,"start":298,"end":306,"href":"https://pub.dev/packages/printing","title":"","rel":"","anchorType":0},{"type":3,"start":308,"end":313,"href":"https://pub.dev/packages/win32","title":"","rel":"","anchorType":0},{"type":3,"start":315,"end":324,"href":"https://pub.dev/packages/objectbox","title":"","rel":"","anchorType":0},{"type":3,"start":326,"end":331,"href":"https://pub.dev/packages/realm","title":"","rel":"","anchorType":0},{"type":3,"start":333,"end":337,"href":"https://pub.dev/packages/isar","title":"","rel":"","anchorType":0},{"type":3,"start":339,"end":353,"href":"https://pub.dev/packages/tflite_flutter","title":"","rel":"","anchorType":0},{"type":3,"start":359,"end":363,"href":"https://pub.dev/packages/dbus","title":"","rel":"","anchorType":0}]},{"name":"9d30","type":1,"text":"The Dart team wants Dart to support interoperability with all the primary languages on the platforms where Dart runs. Dart 2.18 meets the next milestone toward that goal. Your Dart code can call Objective-C and Swift code, as typically used for APIs on the macOS and iOS platforms. Dart supports this interop mechanism in any app from the CLI app to backend code to a Flutter UI.","markups":[]},{"name":"6947","type":1,"text":"This new mechanism utilizes the fact that Objective-C and Swift code can be exposed as C code based on API bindings. The Dart API wrapper generation tool, ffigen, can create these bindings from API headers. Let’s take a look at an example.","markups":[{"type":10,"start":155,"end":161},{"type":3,"start":155,"end":161,"href":"https://pub.dev/packages/ffigen","title":"","rel":"","anchorType":0}]},{"name":"52b8","type":3,"text":"Time Zone example using Objective-C","markups":[]},{"name":"d364","type":1,"text":"macOS has an API for querying time zones information exposed on the NSTimeZone class. You can query this API for the time zone and UTC time zone offset that the user has configured for their device.","markups":[{"type":10,"start":68,"end":78},{"type":3,"start":68,"end":84,"href":"https://developer.apple.com/documentation/foundation/nstimezone?language=objc]","title":"","rel":"","anchorType":0},{"type":3,"start":131,"end":151,"href":"https://www.w3.org/International/core/2005/09/timezone.html#:~:text=What%20is%20a%20%22zone%20offset,or%20%22%2D%22%20from%20UTC.","title":"","rel":"","anchorType":0}]},{"name":"e768","type":1,"text":"The following example Objective-C app uses this timezone API to get the system time zone and the GMT offset:","markups":[]},{"name":"a3b4","type":11,"text":"","markups":[],"layout":1,"iframe":{"mediaResourceId":"ef61d2b1be6fec154cb754b81df23efd","thumbnailUrl":"https://i.embed.ly/1/image?url=https%3A%2F%2Fgithub.githubassets.com%2Fimages%2Fmodules%2Fgists%2Fgist-og-image.png&key=a19fcc184b9711e1b4764040d3dc5c07"}},{"name":"c0e3","type":1,"text":"The app imports Foundation.h, which contains the API headers for the Apple Foundation library. Next, inside the main method, it calls the systemTimeZone method from the NSTimeZone class. This method returns an NSTimeZone instance with the selected time zone on the device. Finally, the app outputs two lines to the console containing the name of the time zone and the UTC offset in hours.","markups":[{"type":10,"start":16,"end":28},{"type":10,"start":112,"end":116},{"type":10,"start":138,"end":152},{"type":10,"start":169,"end":179},{"type":10,"start":210,"end":220}]},{"name":"a3f0","type":1,"text":"If you run this app, it should return something resembling the following, depending on your location:","markups":[]},{"name":"1d23","type":8,"text":"Timezone name: Europe/Copenhagen\nTimezone offset GMT: 2 hours","markups":[]},{"name":"eb6f","type":3,"text":"Time Zone example using Using Dart","markups":[]},{"name":"8b38","type":1,"text":"Let’s replicate this result with Dart using the new Objective-C interop.","markups":[]},{"name":"45e5","type":1,"text":"First create a new Dart CLI app:","markups":[]},{"name":"ac63","type":8,"text":"$ dart create timezones","markups":[]},{"name":"3943","type":1,"text":"Then edit your pubspec file to contain the ffigen configuration. This configuration points to the header file and lists which Objective-C interfaces should generate wrappers:","markups":[{"type":10,"start":15,"end":22},{"type":10,"start":43,"end":49}]},{"name":"87d0","type":11,"text":"","markups":[],"layout":1,"iframe":{"mediaResourceId":"e141b727eb67254416b12f761a2541ea","thumbnailUrl":"https://i.embed.ly/1/image?url=https%3A%2F%2Fgithub.githubassets.com%2Fimages%2Fmodules%2Fgists%2Fgist-og-image.png&key=a19fcc184b9711e1b4764040d3dc5c07"}},{"name":"ff01","type":1,"text":"This selects Objective-C bindings for the headers in NSTimeZone.h and includes just the APIs in the NSTimeZone interface. To generate the wrappers, run ffigen:","markups":[{"type":10,"start":53,"end":65},{"type":10,"start":100,"end":110},{"type":10,"start":152,"end":158}]},{"name":"5400","type":8,"text":"$ dart run ffigen","markups":[]},{"name":"bd15","type":1,"text":"This command creates a new file, foundation_bindings.dart, that contains a bunch of generated API bindings. Using this binding file, we can write our Dart main method. This method mirrors the Objective-C code:","markups":[{"type":10,"start":33,"end":57},{"type":10,"start":155,"end":159}]},{"name":"13af","type":11,"text":"","markups":[],"layout":1,"iframe":{"mediaResourceId":"fcabe4d8611fcf5c13288ab24c2d2cf0","thumbnailUrl":"https://i.embed.ly/1/image?url=https%3A%2F%2Fgithub.githubassets.com%2Fimages%2Fmodules%2Fgists%2Fgist-og-image.png&key=a19fcc184b9711e1b4764040d3dc5c07"}},{"name":"10a5","type":1,"text":"That’s it! This new support is available in an experimental state starting with today’s Dart 2.18. This boosts Dart’s general interop support to call macOS and iOS APIs directly. This, in turn, supplements Flutter’s plugins, with new support that works in any Dart app, and that allows you to call macOS and iOS APIs directly from Dart code.","markups":[]},{"name":"b98d","type":1,"text":"We welcome your feedback. Let us know what worked, what might be changed, or what problems you experienced by commenting in the feedback issue on GitHub. To learn more about this interoperability, see the Objective-C and Swift interoperability guide.","markups":[{"type":3,"start":128,"end":142,"href":"https://github.com/dart-lang/sdk/issues/49673","title":"","rel":"","anchorType":0},{"type":3,"start":205,"end":249,"href":"https://dart.dev/guides/libraries/objective-c-interop","title":"","rel":"","anchorType":0}]},{"name":"ead9","type":3,"text":"Platform-specific http libraries","markups":[]},{"name":"1aae","type":1,"text":"Dart includes a general, multi-platform http library. This library allows you to write code without concern for platform specifics. On occasion, you might want to write code specific to a particular host platform’s networking APIs.","markups":[{"type":10,"start":40,"end":44}]},{"name":"4903","type":1,"text":"For example, Apple’s networking library NSURLSession allows specifying WiFi-only networking or that it requires a VPN. To support these use cases, we’ve created a new networking package intended for the macOS and iOS platforms, cupertino_http. This builds on the new Objective-C interop mentioned in the previous section. It uses a large set of API wrappers generated from Apple’s networking APIs in Foundation.","markups":[{"type":10,"start":40,"end":52},{"type":10,"start":228,"end":242},{"type":3,"start":40,"end":52,"href":"https://developer.apple.com/documentation/foundation/nsurlsession","title":"","rel":"","anchorType":0},{"type":3,"start":228,"end":242,"href":"https://pub.dev/packages/cupertino_http","title":"","rel":"","anchorType":0},{"type":3,"start":358,"end":367,"href":"https://github.com/dart-lang/http/blob/master/pkgs/cupertino_http/ffigen.yaml","title":"","rel":"","anchorType":0}]},{"name":"2461","type":3,"text":"Cupertino http library example","markups":[]},{"name":"384c","type":1,"text":"The following example sets a Flutter app’s http client to use the cupertino_http library on macOS and iOS and Dart’s regular http library from dart:io on other platforms:","markups":[{"type":10,"start":66,"end":80},{"type":10,"start":143,"end":150}]},{"name":"b585","type":11,"text":"","markups":[],"layout":1,"iframe":{"mediaResourceId":"c5b78357f8d02897d6f62881f94496d0","thumbnailUrl":"https://i.embed.ly/1/image?url=https%3A%2F%2Fgithub.githubassets.com%2Fimages%2Fmodules%2Fgists%2Fgist-og-image.png&key=a19fcc184b9711e1b4764040d3dc5c07"}},{"name":"edde","type":1,"text":"After this initial configuration, the app makes any subsequent networking calls on the specific client. For example, an http get() request now resembles this:","markups":[{"type":10,"start":125,"end":130}]},{"name":"4e10","type":11,"text":"","markups":[],"layout":1,"iframe":{"mediaResourceId":"f29598f412d315b09cb2dc3ecfaa9bb2","thumbnailUrl":"https://i.embed.ly/1/image?url=https%3A%2F%2Fgithub.githubassets.com%2Fimages%2Fmodules%2Fgists%2Fgist-og-image.png&key=a19fcc184b9711e1b4764040d3dc5c07"}},{"name":"4037","type":1,"text":"When you cannot use the common client interface, you can call Apple’s networking APIs directly using the cupertino_http library:","markups":[{"type":10,"start":105,"end":119}]},{"name":"5aac","type":11,"text":"","markups":[],"layout":1,"iframe":{"mediaResourceId":"1f7339c1448fce84f5837bb3bca0f1a8","thumbnailUrl":"https://i.embed.ly/1/image?url=https%3A%2F%2Fgithub.githubassets.com%2Fimages%2Fmodules%2Fgists%2Fgist-og-image.png&key=a19fcc184b9711e1b4764040d3dc5c07"}},{"name":"39f9","type":3,"text":"Platform-specific networking in multi-platform apps","markups":[]},{"name":"fa6b","type":1,"text":"As we designed this feature, the goal remained to keep apps as multi-platform as possible. To meet this goal, we kept our general multi-platform http API set for basic http operations, and allowed for configuring per-platform which networking library to use. You can minimize the amount of platform-specific code that you need to write by using the package:http Client API. This API can be configured per-platform but used in a platform-independent manner.","markups":[{"type":10,"start":145,"end":149},{"type":10,"start":349,"end":361},{"type":3,"start":349,"end":372,"href":"https://pub.dev/documentation/http/latest/http/Client-class.html","title":"","rel":"","anchorType":0}]},{"name":"9960","type":1,"text":"Dart 2.18 offers experimental support of two platform-specific http libraries that support the package:http Client API:","markups":[{"type":10,"start":95,"end":107},{"type":3,"start":108,"end":118,"href":"https://pub.dev/documentation/http/latest/http/Client-class.html","title":"","rel":"","anchorType":0}]},{"name":"ac0b","type":9,"text":"cupertino_http based on NSURLSession for macOS/iOS.","markups":[{"type":10,"start":0,"end":14},{"type":10,"start":24,"end":36},{"type":3,"start":0,"end":14,"href":"https://pub.dev/packages/cupertino_http","title":"","rel":"","anchorType":0},{"type":3,"start":24,"end":36,"href":"https://developer.apple.com/documentation/foundation/nsurlsession","title":"","rel":"","anchorType":0}]},{"name":"3a35","type":9,"text":"cronet_http based on Cronet, the networking library popular on Android.","markups":[{"type":10,"start":0,"end":11},{"type":3,"start":0,"end":11,"href":"https://pub.dev/packages/cronet_http","title":"","rel":"","anchorType":0},{"type":3,"start":21,"end":27,"href":"https://developer.android.com/guide/topics/connectivity/cronet","title":"","rel":"","anchorType":0}]},{"name":"5ffc","type":1,"text":"Combining a common client API with several HTTP implementations gives you the best of both worlds. You can get platform-specific behavior while still maintaining your apps from a single set of shared sources for all your platforms. We’d love to hear your feedback on this GitHub issue.","markups":[{"type":3,"start":272,"end":284,"href":"https://github.com/dart-lang/http/issues/764","title":"","rel":"","anchorType":0}]},{"name":"2d4b","type":3,"text":"Improved type inference","markups":[]},{"name":"52c1","type":1,"text":"Dart uses many generic functions. Consider the fold method, which reduces a collection of elements to a single value. The following example calculates the sum of a list of integers:","markups":[{"type":10,"start":47,"end":51},{"type":3,"start":47,"end":51,"href":"https://api.dart.dev/stable/2.17.6/dart-core/Iterable/fold.html","title":"","rel":"","anchorType":0}]},{"name":"83ee","type":8,"text":"List<int> numbers = [1, 2, 3];\nfinal sum = numbers.fold(0, (x, y) => x + y);\nprint('The sum of $numbers is $sum');","markups":[],"codeBlockMetadata":{"mode":1,"lang":"dart"}},{"name":"5d24","type":1,"text":"With Dart 2.17 or earlier, this method returns a type error:","markups":[]},{"name":"d9cc","type":8,"text":"line 2 • The operator '+' can't be unconditionally invoked \n         because the receiver can be 'null'.","markups":[],"codeBlockMetadata":{"mode":0,"lang":""}},{"name":"c863","type":1,"text":"Dart’s type inference couldn’t flow information between the arguments. This resulted in uncertainty of the type of x. To remedy the potential error, you needed to specify the type:","markups":[{"type":10,"start":115,"end":116}]},{"name":"19d7","type":8,"text":"final sum = numbers.fold(0, (int x, int y) => x + y);","markups":[],"codeBlockMetadata":{"mode":1,"lang":"dart"}},{"name":"201a","type":1,"text":"Dart 2.18 improves type inference. The previous example passes static analysis and can infer that both x and y are non-nullable ints. This change allows you to write more concise Dart code while retaining the full soundness properties of the strongly inferred types.","markups":[]},{"name":"c21c","type":3,"text":"Async performance improvements","markups":[]},{"name":"a07c","type":1,"text":"This version of Dart improves how the Dart VM applies the async method and the async*/sync* generator functions. This reduces code size. On two large internal Google apps, we saw a reduction of the AOT snapshot size of around 10%. We also saw a performance increase across our microbenchmarks.","markups":[{"type":10,"start":58,"end":63},{"type":10,"start":79,"end":85},{"type":10,"start":86,"end":91}]},{"name":"eef3","type":1,"text":"These changes include additional small behavior changes; to learn more, see the changelog.","markups":[{"type":3,"start":76,"end":89,"href":"https://github.com/dart-lang/sdk/blob/master/CHANGELOG.md#dart-vm","title":"","rel":"","anchorType":0}]},{"name":"1667","type":3,"text":"pub.dev improvements","markups":[]},{"name":"c641","type":1,"text":"In conjunction with the 2.18 release, we’ve made two changes on the pub.dev package repository.","markups":[{"type":10,"start":68,"end":75}]},{"name":"ca03","type":1,"text":"Individuals often maintain packages published on pub.dev in their spare time. This can be costly, both in terms of time and finances. To facilitate sponsorships we now support a new funding tag in the pubspec, which can be used by package publishers to list links to one or more ways of sponsoring the package. These links are then shown on pub.dev in the sidebar:","markups":[{"type":10,"start":49,"end":56},{"type":10,"start":182,"end":189},{"type":10,"start":201,"end":208},{"type":10,"start":341,"end":348}]},{"name":"6ddf","type":4,"text":"","markups":[],"layout":1,"metadata":{"id":"0*FteRd2cVBg3Zq7JO","originalWidth":420,"originalHeight":498}},{"name":"3f1e","type":1,"text":"To learn more, see the pubspec documentation.","markups":[{"type":10,"start":23,"end":30},{"type":3,"start":23,"end":44,"href":"https://dart.dev/tools/pub/pubspec#funding","title":"","rel":"","anchorType":0}]},{"name":"31e1","type":1,"text":"Furthermore, we’d like to encourage a rich ecosystem of open source packages. To highlight this, the automated package scoring on pub.dev awards an additional 10 points for packages that use an OSI approved license.","markups":[{"type":10,"start":130,"end":137},{"type":3,"start":194,"end":214,"href":"https://opensource.org/licenses","title":"","rel":"","anchorType":0}]},{"name":"6aee","type":3,"text":"A few breaking changes","markups":[]},{"name":"82a6","type":1,"text":"Dart has a strong focus on simplicity and learnability. We’re constantly trying to keep a careful balance when adding new capabilities. One method to keep things simple is to remove historic functionality and APIs with little use or better replacements. Dart 2.18 cleans up items in this category, including a few smaller breaking changes:","markups":[]},{"name":"15ce","type":9,"text":"We added the unified dart CLI developer tool back in October 2020. In 2.18, we completed the transition. This release removes the last two deprecated tools dart2js (use dart compile js) and dartanalyzer (use dart analyze).","markups":[{"type":10,"start":21,"end":25},{"type":10,"start":156,"end":163},{"type":10,"start":169,"end":184},{"type":10,"start":190,"end":202},{"type":10,"start":208,"end":220}]},{"name":"514e","type":9,"text":"With the introduction of language versioning, pub generates a new resolution file: .dart_tool/package_config.json. The previous file, .packages, used a format that couldn’t contain versions. We discontinued using the .packages file. If you have any .packages files, you can delete them.","markups":[{"type":10,"start":46,"end":49},{"type":10,"start":83,"end":114},{"type":10,"start":134,"end":143},{"type":10,"start":217,"end":226},{"type":10,"start":249,"end":258}]},{"name":"ee33","type":9,"text":"Mixins of classes that don’t extend Object can’t be used (breaking change #48167). This behavior was never intended.","markups":[{"type":10,"start":36,"end":42},{"type":3,"start":74,"end":80,"href":"https://github.com/dart-lang/sdk/issues/48167","title":"","rel":"","anchorType":0}]},{"name":"5f36","type":9,"text":"The uri property of dart:io’s RedirectException has been changed to nullable (breaking change #49045).","markups":[{"type":10,"start":4,"end":7},{"type":10,"start":20,"end":27},{"type":10,"start":30,"end":47},{"type":3,"start":94,"end":100,"href":"https://github.com/dart-lang/sdk/issues/49045","title":"","rel":"","anchorType":0}]},{"name":"eb2a","type":9,"text":"Constants in dart:io’s networking APIs following the SCREAMING_SNAKE convention have been removed (breaking change #34218; previously deprecated). Use the corresponding lowerCamelCase constants instead.","markups":[{"type":10,"start":13,"end":20},{"type":3,"start":115,"end":121,"href":"https://github.com/dart-lang/sdk/issues/34218","title":"","rel":"","anchorType":0}]},{"name":"3f7e","type":9,"text":"The Dart VM no longer restores the initial terminal settings upon exit. Programs that change the Stdin settings lineMode and echoMode are now responsible for restoring the settings upon program exit (breaking change #45630).","markups":[{"type":10,"start":97,"end":102},{"type":10,"start":112,"end":120},{"type":10,"start":125,"end":133},{"type":3,"start":216,"end":222,"href":"https://github.com/dart-lang/sdk/issues/45630","title":"","rel":"","anchorType":0}]},{"name":"05f5","type":3,"text":"Null safety update","markups":[]},{"name":"fed6","type":1,"text":"We’re very pleased to see the wide usage of null safety since its beta release in November 2020 and the Dart 2.12 release in March 2021.","markups":[{"type":3,"start":104,"end":113,"href":"https://medium.com/dartlang/announcing-dart-2-12-499a6e689c87","title":"","rel":"","anchorType":0}]},{"name":"133c","type":1,"text":"First, app developers of most all the popular packages on pub.dev migrated to null safety. Analysis shows that 100% of the top-250 and 98% of the top-1,000 most used packages support null safety.","markups":[{"type":10,"start":58,"end":65}]},{"name":"e63f","type":1,"text":"Second, most app developers work in codebases with full null safety migration. This is crucial. Dart’s full sound null safety doesn’t kick in until you migrate all code and all dependencies (including transitive). We’re tracking this via telemetry from flutter run commands.","markups":[{"type":10,"start":253,"end":264},{"type":3,"start":108,"end":125,"href":"https://dart.dev/null-safety/understanding-null-safety","title":"","rel":"","anchorType":0}]},{"name":"4127","type":1,"text":"The following graph shows the unsound vs. sound null safety executions of flutter run. Before the introduction of null safety, there were none of either. A rapid growth of unsound null safety followed. As apps started migrating to null safety, the developers made a partial migration. Some parts still needed to be migrated. Over time, we see a very healthy growth of sound null safety sessions. By the end of last month, there were four times more sound null safety sessions compared to unsound ones. We hope that, over the next few quarters, we’ll see the sound null safety approach 100%!","markups":[{"type":10,"start":74,"end":85}]},{"name":"d71e","type":4,"text":"","markups":[],"layout":1,"metadata":{"id":"0*emVp4pmfOhLhiBJ4","originalWidth":600,"originalHeight":371}},{"name":"618f","type":3,"text":"An important null safety roadmap update","markups":[]},{"name":"ec56","type":1,"text":"Supporting both unsound and sound null safety adds overhead and complexity.","markups":[]},{"name":"f695","type":1,"text":"First, Dart developers need to learn and understand both modes. Whenever reading a piece of Dart code, check the language version to see if types are non-null by default (Dart 2.12 and later) or nullable by default (Dart 2.11 and earlier).","markups":[{"type":3,"start":113,"end":129,"href":"https://dart.dev/guides/language/evolution#language-versioning","title":"","rel":"","anchorType":0}]},{"name":"2a29","type":1,"text":"Second, supporting both modes in our compilers and runtimes slows down evolving the Dart SDK to support new features.","markups":[]},{"name":"b93e","type":1,"text":"Based on the overhead of unsound null safety and the very positive adoption numbers mentioned in the previous section, it’s our aim to transition to only supporting sound null safety and discontinue non-null safety and unsound null safety modes. We’ve tentatively slated this for release by mid-2023.","markups":[{"type":1,"start":0,"end":300},{"type":2,"start":0,"end":300}]},{"name":"b111","type":1,"text":"This would mean that discontinuing support for Dart 2.11 and earlier. Pubspec files with an SDK constraint having a lower bound of less than 2.12 would no longer resolve in Dart 3 and later. In source code containing language markers, those would fail if set to less than 2.12 (such as// @dart=2.9).","markups":[{"type":10,"start":285,"end":297}]},{"name":"c073","type":1,"text":"If you’ve migrated to sound null safety, your code will work with full null safety in Dart 3. If you haven’t, please migrate now! To learn more about these changes, see this GitHub issue.","markups":[{"type":3,"start":169,"end":186,"href":"https://github.com/dart-lang/sdk/issues/49530","title":"","rel":"","anchorType":0}]},{"name":"b7b6","type":3,"text":"Summary","markups":[]},{"name":"41c9","type":1,"text":"The new support for interop, networking, type inference, and pub.dev is available today. To get started, you can directly download the Dart 2.18 release, or get it embedded as part of today’s Flutter 3.3 SDK release.","markups":[{"type":10,"start":61,"end":68},{"type":3,"start":135,"end":152,"href":"https://dart.dev/get-dart","title":"","rel":"","anchorType":0},{"type":3,"start":192,"end":203,"href":"https://medium.com/flutter/announcing-flutter-3-3-at-flutter-vikings-6f213e068793","title":"","rel":"","anchorType":0}]}],"sections":[{"name":"bb93","startIndex":0}]},"postDisplay":{"coverless":true}},"virtuals":{"statusForCollection":"APPROVED","allowNotes":true,"previewImage":{"imageId":"0*byFoNx1wnEaO0S6N","filter":"","backgroundSize":"","originalWidth":1600,"originalHeight":477,"strategy":"resample","height":0,"width":0},"wordCount":2028,"imageCount":3,"readingTime":8.202830188679245,"subtitle":"Enhanced interoperability, platform-specific networking, improved type inference, and an important update on our null safety language…","userPostRelation":{"userId":"8b6a7f6f197d","postId":"f4b3101f146c","readAt":0,"readLaterAddedAt":0,"votedAt":0,"collaboratorAddedAt":0,"notesAddedAt":0,"subscribedAt":0,"lastReadSectionName":"","lastReadVersionId":"","lastReadAt":0,"lastReadParagraphName":"","lastReadPercentage":0,"viewedAt":0,"presentedCountInResponseManagement":0,"clapCount":0,"seriesUpdateNotifsOptedInAt":0,"queuedAt":0,"seriesFirstViewedAt":0,"presentedCountInStream":5,"seriesLastViewedAt":0,"audioProgressSec":0},"publishedInCount":1,"usersBySocialRecommends":[],"noIndex":false,"recommends":140,"isBookmarked":false,"tags":[{"slug":"dart","name":"Dart","postCount":13858,"metadata":{"postCount":13858,"coverImage":{"id":"1*rQugDrmwFFsEDL_CqSBJNw.png","originalWidth":1536,"originalHeight":1024,"isFeatured":true}},"type":"Tag"},{"slug":"announcements","name":"Announcements","postCount":13699,"metadata":{"postCount":13699,"coverImage":{"id":"1*NID7gzHCH5pIB3Cy0Lcnjw.png","originalWidth":1536,"originalHeight":1024,"isFeatured":true}},"type":"Tag"},{"slug":"interop","name":"Interop","postCount":37,"metadata":{"postCount":37,"coverImage":{"id":"1*Ii3NNI1RELfm3bZuSYuJVw.png","originalWidth":2160,"originalHeight":2160,"isFeatured":true}},"type":"Tag"},{"slug":"null-safety","name":"Null Safety","postCount":354,"metadata":{"postCount":354,"coverImage":{"id":"1*x4UM7QqdQN6OlsSEA55g1A.png","originalWidth":1920,"originalHeight":1080,"isFeatured":true}},"type":"Tag"}],"socialRecommendsCount":0,"responsesCreatedCount":7,"links":{"entries":[{"url":"https://opensource.org/licenses","alts":[],"httpStatus":403},{"url":"https://dart.dev/get-dart","alts":[],"httpStatus":200},{"url":"https://dart.dev/tools/pub/pubspec#funding","alts":[],"httpStatus":200},{"url":"https://dart.dev/guides/language/evolution#language-versioning","alts":[],"httpStatus":200},{"url":"https://dart.dev/null-safety/understanding-null-safety","alts":[],"httpStatus":200},{"url":"https://medium.com/flutter/announcing-flutter-3-3-at-flutter-vikings-6f213e068793","alts":[{"type":3,"url":"medium://p/6f213e068793"},{"type":2,"url":"medium://p/6f213e068793"}],"httpStatus":200},{"url":"https://medium.com/dartlang/announcing-dart-2-12-499a6e689c87","alts":[{"type":3,"url":"medium://p/499a6e689c87"},{"type":2,"url":"medium://p/499a6e689c87"}],"httpStatus":200},{"url":"https://pub.dev/documentation/http/latest/http/Client-class.html","alts":[],"httpStatus":200},{"url":"https://pub.dev/packages/cupertino_http","alts":[],"httpStatus":200},{"url":"https://pub.dev/packages/cronet_http","alts":[],"httpStatus":200},{"url":"https://pub.dev/packages/printing","alts":[],"httpStatus":200},{"url":"https://www.w3.org/International/core/2005/09/timezone.html#:~:text=What%20is%20a%20%22zone%20offset,or%20%22%2D%22%20from%20UTC.","alts":[],"httpStatus":200},{"url":"https://pub.dev/packages/isar","alts":[],"httpStatus":200},{"url":"https://pub.dev/packages/objectbox","alts":[],"httpStatus":200},{"url":"https://pub.dev/packages/dbus","alts":[],"httpStatus":200},{"url":"https://pub.dev/packages/file_picker","alts":[],"httpStatus":200},{"url":"https://pub.dev/packages/win32","alts":[],"httpStatus":200},{"url":"https://pub.dev/packages/tflite_flutter","alts":[],"httpStatus":200},{"url":"https://pub.dev/packages/realm","alts":[],"httpStatus":200},{"url":"https://github.com/dart-lang/http/blob/master/pkgs/cupertino_http/ffigen.yaml","alts":[],"httpStatus":200},{"url":"https://developer.apple.com/documentation/foundation/nsurlsession","alts":[],"httpStatus":200},{"url":"https://dart.dev/guides/libraries/objective-c-interop","alts":[],"httpStatus":200},{"url":"https://pub.dev/packages/ffigen","alts":[],"httpStatus":200},{"url":"https://api.dart.dev/stable/2.17.6/dart-core/Iterable/fold.html","alts":[],"httpStatus":200},{"url":"https://github.com/dart-lang/sdk/issues/49673","alts":[],"httpStatus":200},{"url":"https://github.com/dart-lang/http/issues/764","alts":[],"httpStatus":200},{"url":"https://developer.apple.com/documentation/foundation/nstimezone?language=objc]","alts":[],"httpStatus":200},{"url":"https://github.com/dart-lang/sdk/blob/master/CHANGELOG.md#dart-vm","alts":[],"httpStatus":200},{"url":"https://github.com/dart-lang/sdk/issues/49045","alts":[],"httpStatus":200},{"url":"https://github.com/dart-lang/sdk/issues/49530","alts":[],"httpStatus":200},{"url":"https://github.com/dart-lang/sdk/issues/34218","alts":[],"httpStatus":200},{"url":"https://github.com/dart-lang/sdk/issues/48167","alts":[],"httpStatus":200},{"url":"https://developer.android.com/guide/topics/connectivity/cronet","alts":[],"httpStatus":200},{"url":"https://github.com/dart-lang/sdk/issues/45630","alts":[],"httpStatus":200}],"version":"0.3","generatedAt":1682598772342},"isLockedPreviewOnly":false,"metaDescription":"","totalClapCount":1340,"sectionCount":1,"readingList":0,"topics":[{"topicId":"ab3d8f7f8eb1","slug":"ios-development","createdAt":1521651850182,"deletedAt":0,"image":{"id":"1*g_B4JNulmfXSj0AyEjImyA@2x.jpeg","originalWidth":5184,"originalHeight":3456},"name":"iOS Dev","description":"Appy talk.","relatedTopics":[],"visibility":1,"relatedTags":[],"relatedTopicIds":[],"seoTitle":"iOS App Development: Articles and News — Medium","type":"Topic"},{"topicId":"decb52b64abf","slug":"programming","createdAt":1493934116328,"deletedAt":0,"image":{"id":"1*iPa136b1cGEO7lvoXg6uHQ@2x.jpeg","originalWidth":6016,"originalHeight":4016},"name":"Programming","description":"The good, the bad, the buggy.","relatedTopics":[],"visibility":1,"relatedTags":[],"relatedTopicIds":[],"seoTitle":"Programming News and Articles — Medium","type":"Topic"}]},"coverless":true,"slug":"dart-2-18-objective-c-swift-interop","translationSourcePostId":"","translationSourceCreatorId":"","isApprovedTranslation":false,"inResponseToPostId":"","inResponseToRemovedAt":0,"isTitleSynthesized":true,"allowResponses":true,"importedUrl":"","importedPublishedAt":0,"visibility":0,"uniqueSlug":"dart-2-18-f4b3101f146c","previewContent":{"bodyModel":{"paragraphs":[{"name":"previewImage","type":4,"text":"","layout":10,"metadata":{"id":"0*byFoNx1wnEaO0S6N","originalWidth":1600,"originalHeight":477,"isFeatured":true}},{"name":"d57a","type":3,"text":"Dart 2.18: Objective-C & Swift interop","markups":[],"alignment":1},{"name":"87dc","type":13,"text":"Enhanced interoperability, platform-specific networking…","markups":[],"alignment":1}],"sections":[{"startIndex":0}]},"isFullContent":false,"subtitle":"Enhanced interoperability, platform-specific networking, improved type inference, and an important update on our null safety language…"},"license":0,"inResponseToMediaResourceId":"","canonicalUrl":"https://blog.dart.dev/dart-2-18-f4b3101f146c","approvedHomeCollectionId":"23738d481ce8","isNewsletter":false,"newsletterId":"","webCanonicalUrl":"https://blog.dart.dev/dart-2-18-f4b3101f146c","mediumUrl":"https://blog.dart.dev/dart-2-18-f4b3101f146c","migrationId":"","notifyFollowers":true,"notifyTwitter":false,"notifyFacebook":false,"responseHiddenOnParentPostAt":0,"isSeries":false,"isSubscriptionLocked":false,"seriesLastAppendedAt":0,"audioVersionDurationSec":0,"sequenceId":"","isEligibleForRevenue":false,"isBlockedFromHightower":false,"deletedAt":0,"lockedPostSource":0,"hightowerMinimumGuaranteeStartsAt":0,"hightowerMinimumGuaranteeEndsAt":0,"featureLockRequestAcceptedAt":0,"mongerRequestType":1,"layerCake":3,"socialTitle":"","socialDek":"","editorialPreviewTitle":"","editorialPreviewDek":"","curationEligibleAt":0,"primaryTopic":{"topicId":"decb52b64abf","slug":"programming","createdAt":1493934116328,"deletedAt":0,"image":{"id":"1*iPa136b1cGEO7lvoXg6uHQ@2x.jpeg","originalWidth":6016,"originalHeight":4016},"name":"Programming","description":"The good, the bad, the buggy.","relatedTopics":[],"visibility":1,"relatedTags":[],"relatedTopicIds":[],"seoTitle":"Programming News and Articles — Medium","type":"Topic"},"primaryTopicId":"decb52b64abf","isProxyPost":false,"proxyPostFaviconUrl":"","proxyPostProviderName":"","proxyPostType":0,"isSuspended":false,"isLimitedState":false,"seoTitle":"","previewContent2":{"bodyModel":{"paragraphs":[{"name":"d57a","type":3,"text":"Dart 2.18: Objective-C & Swift interop","markups":[]},{"name":"87dc","type":13,"text":"Enhanced interoperability, platform-specific networking, improved type inference, and an important update on our null safety language roadmap","markups":[]},{"name":"3241","type":1,"text":"Dart 2.18 is available today. This release features a preview of Objective-C & Swift interoperability and a new iOS/macOS networking package built on top of this interop. It also contains improved type inference for generic functions, performance improvements to async code, new pub.dev features, and cleanup of our tools and…","markups":[{"type":2,"start":0,"end":341}]}],"sections":[{"name":"bb93","startIndex":0}]},"isFullContent":false,"subtitle":"Enhanced interoperability, platform-specific networking, improved type inference, and an important update on our null safety language…"},"cardType":0,"isDistributionAlertDismissed":false,"isShortform":false,"shortformType":0,"responsesLocked":false,"isLockedResponse":false,"isPublishToEmail":false,"responseDistribution":0,"isMarkedPaywallOnly":false,"type":"Post"},"mentionedUsers":[],"collaborators":[],"hideMeter":false,"shareKey":"608a7099e72e99aec3733080a286b79d","collectionUserRelations":[{"collectionId":"23738d481ce8","userId":"8b6a7f6f197d","role":"ADMIN"},{"collectionId":"4da7dfd21a33","userId":"8b6a7f6f197d","role":"WRITER"},{"collectionId":"24d8f4fa8912","userId":"8b6a7f6f197d","role":"WRITER"}],"mode":"canEdit","references":{"User":{"a6d788faa5e5":{"userId":"a6d788faa5e5","name":"Michael Thomsen","username":"mit.mit","createdAt":1481367237471,"imageId":"0*Y_CFLc1qadgr3tPK.","backgroundImageId":"","bio":"Product Manager working on Dart and Flutter. Helping developers is my passion!","twitterScreenName":"","socialStats":{"userId":"a6d788faa5e5","usersFollowedCount":1,"usersFollowedByCount":9653,"type":"SocialStats"},"social":{"userId":"8b6a7f6f197d","targetUserId":"a6d788faa5e5","isFollowing":true,"isTwitterFollowing":false,"isFacebookFollowing":false,"isMediumFollowing":true,"type":"Social"},"allowNotes":1,"mediumMemberAt":1752847030513,"isWriterProgramEnrolled":true,"isSuspended":false,"isMembershipTrialEligible":true,"facebookDisplayName":"","optInToIceland":true,"hasCompletedProfile":false,"userDismissableFlags":[1,2,5,8,12,17,18,21,30,32,33,53,58,59,61],"hasSeenIcelandOnboarding":true,"postSubscribeMembershipUpsellShownAt":0,"languageCode":"da","type":"User"}},"Collection":{"23738d481ce8":{"id":"23738d481ce8","name":"Dart","slug":"dartlang","tags":["MOBILE APP DEVELOPMENT","WEB DEVELOPMENT","DART","PROGRAMMING LANGUAGES","SOFTWARE DEVELOPMENT"],"creatorId":"a6d788faa5e5","description":"Dart is an approachable, portable, and productive language for high-quality apps on any platform. Learn more at https://dart.dev.","shortDescription":"Dart is an approachable, portable, and productive language…","image":{"imageId":"1*uWy1Ajpd0oTUQBO9WBHoQg@2x.png","filter":"","backgroundSize":"","originalWidth":1001,"originalHeight":1001,"strategy":"resample","height":0,"width":0},"metadata":{"followerCount":14031,"activeAt":1762974121956},"virtuals":{"permissions":{"canPublish":true,"canPublishAll":true,"canRepublish":true,"canRemove":true,"canManageAll":true,"canSubmit":true,"canEditPosts":true,"canAddWriters":true,"canViewStats":true,"canSendNewsletter":true,"canViewLockedPosts":true,"canViewCloaked":true,"canEditOwnPosts":true,"canBeAssignedAuthor":true,"canEnrollInHightower":false,"canLockPostsForMediumMembers":false,"canLockOwnPostsForMediumMembers":false,"canViewNewsletterV2Stats":true,"canCreateNewsletterV3":true},"isSubscribed":true,"isEnrolledInHightower":false,"isEligibleForHightower":false,"isSubscribedToCollectionEmails":false,"isMuted":false,"canToggleEmail":false,"isWriter":false},"logo":{"imageId":"1*NRb7RFVWJQFzY47j3v4U7Q.png","filter":"","backgroundSize":"","originalWidth":400,"originalHeight":154,"strategy":"resample","height":0,"width":0},"twitterUsername":"dart_lang","publicEmail":"medium@dartlang.org","domain":"blog.dart.dev","sections":[{"type":2,"collectionHeaderMetadata":{"title":"Dart","description":"An approachable, portable, and productive language for high-quality apps on any platform","backgroundImage":{},"logoImage":{"id":"1*knHF_qpxdtS8h0Z8EeqowA@2x.png","originalWidth":1080,"originalHeight":1080,"alt":"Dart"},"alignment":2,"layout":5}},{"type":1,"postListMetadata":{"source":1,"layout":4,"number":7,"postIds":[]}},{"type":1,"postListMetadata":{"source":1,"layout":5,"number":15,"postIds":[]}}],"tintColor":"#FF042B59","lightText":true,"favicon":{"imageId":"","filter":"","backgroundSize":"","originalWidth":0,"originalHeight":0,"strategy":"resample","height":0,"width":0},"colorPalette":{"defaultBackgroundSpectrum":{"colorPoints":[{"color":"#FF6588BA","point":0},{"color":"#FF607EAB","point":0.1},{"color":"#FF59759C","point":0.2},{"color":"#FF536B8E","point":0.3},{"color":"#FF4C617F","point":0.4},{"color":"#FF445670","point":0.5},{"color":"#FF3D4B61","point":0.6},{"color":"#FF344052","point":0.7},{"color":"#FF2B3442","point":0.8},{"color":"#FF212832","point":0.9},{"color":"#FF161A22","point":1}],"backgroundColor":"#FFFFFFFF"},"tintBackgroundSpectrum":{"colorPoints":[{"color":"#FF042B59","point":0},{"color":"#FF294871","point":0.1},{"color":"#FF456087","point":0.2},{"color":"#FF5F779B","point":0.3},{"color":"#FF788DAD","point":0.4},{"color":"#FF8FA2BF","point":0.5},{"color":"#FFA5B6CF","point":0.6},{"color":"#FFBBC9DF","point":0.7},{"color":"#FFD1DCEE","point":0.8},{"color":"#FFE6EEFC","point":0.9},{"color":"#FFFBFFFF","point":1}],"backgroundColor":"#FF042B59"},"highlightSpectrum":{"colorPoints":[{"color":"#FFECF3FF","point":0},{"color":"#FFE9F2FF","point":0.1},{"color":"#FFE5F0FF","point":0.2},{"color":"#FFE2EFFF","point":0.3},{"color":"#FFDEEDFF","point":0.4},{"color":"#FFDBEBFF","point":0.5},{"color":"#FFD7EAFF","point":0.6},{"color":"#FFD3E8FF","point":0.7},{"color":"#FFCFE6FF","point":0.8},{"color":"#FFCBE5FF","point":0.9},{"color":"#FFC8E3FF","point":1}],"backgroundColor":"#FFFFFFFF"},"darkBackgroundSpectrum":{"colorPoints":[{"color":"#FF7DA0D3","point":0},{"color":"#FF89A9D8","point":0.1},{"color":"#FF94B1DC","point":0.2},{"color":"#FFA0B9E0","point":0.3},{"color":"#FFABC1E3","point":0.4},{"color":"#FFB6C9E7","point":0.5},{"color":"#FFC0D1EB","point":0.6},{"color":"#FFCBD8EF","point":0.7},{"color":"#FFD5E0F2","point":0.8},{"color":"#FFE0E7F6","point":0.9},{"color":"#FFEAEFFA","point":1}],"backgroundColor":"#FF000000"}},"navItems":[{"type":1,"title":"Announcements","tagSlug":"announcements","url":"https://blog.dart.dev/tagged/announcements","source":"tagSlug"},{"type":5,"title":"Archive","url":"https://blog.dart.dev/archive"},{"type":3,"title":"dart.dev","url":"https://dart.dev"}],"colorBehavior":2,"collectionFeatures":[25],"ampLogo":{"imageId":"","filter":"","backgroundSize":"","originalWidth":0,"originalHeight":0,"strategy":"resample","height":0,"width":0},"header":{"title":"Dart","description":"An approachable, portable, and productive language for high-quality apps on any platform","backgroundImage":{},"logoImage":{"id":"1*knHF_qpxdtS8h0Z8EeqowA@2x.png","originalWidth":1080,"originalHeight":1080,"alt":"Dart"},"alignment":2,"layout":5},"subscriberCount":14031,"tagline":"Dart is a client-optimized language for fast apps on any platform.","isOptedIntoAurora":false,"isCurationAllowedByDefault":false,"polarisCoverImage":{"imageId":"","filter":"","backgroundSize":"","originalWidth":0,"originalHeight":0,"strategy":"resample","height":0,"width":0},"ptsQualifiedAt":1616092887098,"type":"Collection"}},"Social":{"a6d788faa5e5":{"userId":"8b6a7f6f197d","targetUserId":"a6d788faa5e5","isFollowing":true,"isTwitterFollowing":false,"isFacebookFollowing":false,"isMediumFollowing":true,"type":"Social"}},"SocialStats":{"a6d788faa5e5":{"userId":"a6d788faa5e5","usersFollowedCount":1,"usersFollowedByCount":9653,"type":"SocialStats"}}}},"v":3,"b":"20260130-1005-root"}
{"success":true,"payload":{"value":{"id":"9bceb19edf79","versionId":"46633f7bf9c7","creatorId":"4a41236ee91e","homeCollectionId":"23738d481ce8","title":"Screenshots and automated publishing for pub.dev","detectedLanguage":"en","latestVersion":"46633f7bf9c7","latestPublishedVersion":"46633f7bf9c7","hasUnpublishedEdits":true,"latestRev":261,"createdAt":1673983241199,"updatedAt":1674132186895,"acceptedAt":0,"firstPublishedAt":1674064855875,"latestPublishedAt":1674064855875,"vote":false,"experimentalCss":"","displayAuthor":"","content":{"subtitle":"We have a couple of new features available on pub.dev starting today: You can now declare screenshots for a package, enabling a more visual…","bodyModel":{"paragraphs":[{"name":"1485","type":3,"text":"Screenshots and automated publishing for pub.dev","markups":[]},{"name":"7b37","type":1,"text":"We have a couple of new features available on pub.dev starting today: You can now declare screenshots for a package, enabling a more visual approach to search. And the publishing flow can now be fully automated, powered by GitHub Actions.","markups":[]},{"name":"2f64","type":3,"text":"Adding screenshots to pub.dev","markups":[]},{"name":"6a88","type":1,"text":"One of the core objectives of pub.dev is to make it easy to find the right package for a given purpose. When you search for widgets or other visual components, images play an important role. We are now showing screenshots in package search results, to make it easier than ever to find a package.","markups":[]},{"name":"31e8","type":13,"text":"Screenshots in package search and on the package page","markups":[]},{"name":"3a4c","type":1,"text":"Thumbnails of screenshots now appear in the search results and you can also filter the search to only list packages with screenshots.","markups":[]},{"name":"c374","type":4,"text":"","markups":[],"layout":1,"metadata":{"id":"1*B2bqbwEtObMoGQTm8B-FVQ.png","originalWidth":1181,"originalHeight":1138}},{"name":"49b7","type":1,"text":"The screenshot thumbnail is also shown on the package page, and clicking the thumbnail triggers an image carousel with all the screenshots.","markups":[]},{"name":"c540","type":4,"text":"","markups":[],"layout":1,"metadata":{"id":"1*69KfhhHmmvZ6BLvypXjx2A.png","originalWidth":1999,"originalHeight":1092,"isFeatured":true}},{"name":"a7d1","type":13,"text":"Declaring screenshots in `pubspec.yaml`","markups":[]},{"name":"2ec2","type":1,"text":"Adding screenshots to a package is really simple. Declare the files in pubspec.yaml under the screenshots field with a description and a path. Below is an example from the animations package.","markups":[{"type":10,"start":71,"end":83},{"type":10,"start":94,"end":105},{"type":10,"start":119,"end":130},{"type":10,"start":137,"end":141},{"type":10,"start":172,"end":182}]},{"name":"df9c","type":8,"text":"name: animations\n...\nscreenshots:\n - description: 'Examples of the container transform pattern.'\n   path: example/screenshots/container_transform_lineup.webp\n - description: 'Examples of the fade pattern.'\n   path: example/screenshots/fade_lineup.webp\n   ...","markups":[],"codeBlockMetadata":{"mode":2,"lang":"yaml"}},{"name":"1dc3","type":1,"text":"For more details see dart.dev/tools/pub/pubspec#screenshots.","markups":[{"type":3,"start":21,"end":59,"href":"https://dart.dev/tools/pub/pubspec#screenshots","title":"","rel":"","anchorType":0}]},{"name":"23e3","type":3,"text":"Automated publishing for pub.dev","markups":[]},{"name":"827b","type":1,"text":"Thousands of Dart community members publish packages on pub.dev, for the benefit of all Dart and Flutter developers. Traditionally, these package publishers have published to pub.dev by running a local terminal command, dart pub publish, and authenticating with their Google account. Behind the scenes a refresh token was stored in a configuration file on their development machine, which enabled them to publish a new version without authenticating again. This flow is simple and easy to understand, but requires a number of manual steps. We’re happy to introduce a new automated publishing flow, that enables publishing new pub.dev versions directly from a GitHub Action. This has several benefits:","markups":[{"type":10,"start":220,"end":236},{"type":2,"start":304,"end":317}]},{"name":"3174","type":9,"text":"Each release is automatically tagged with consistent release tags in GitHub","markups":[]},{"name":"1221","type":9,"text":"It’s easy to configure a review and approval flow for publishing new versions.","markups":[]},{"name":"a386","type":9,"text":"The publishing process is authenticated by a token signed by GitHub, ensuring no credentials have to be stored on disk.","markups":[]},{"name":"41b7","type":4,"text":"","markups":[],"layout":1,"metadata":{"id":"1*dqxBy1vvLW108xdpqLLZ5Q.png","originalWidth":2938,"originalHeight":1468}},{"name":"e23a","type":13,"text":"Making automated publishing secure","markups":[]},{"name":"ecd0","type":1,"text":"Currently, some users have resorted to storing the pub-credentials.json configuration file containing the refresh token in a secret environment variable on GitHub Actions. This way, they could write a GitHub Action workflow that recovered the configuration file and used it to publish a new version of the package. While this flow technically works, the tooling wasn’t designed with this in mind and the flow has multiple downsides:","markups":[{"type":10,"start":51,"end":71},{"type":2,"start":106,"end":119}]},{"name":"654f","type":9,"text":"The pub-credentials.json files can be used to publish any package the author has permission to publish, not just the one package published from the configured flow.","markups":[{"type":10,"start":4,"end":24}]},{"name":"f977","type":9,"text":"If leaked, the pub-credentials.json can be used to publish new versions and new packages, impersonating the user who created the pub-credentials.json file.","markups":[{"type":10,"start":15,"end":35},{"type":10,"start":129,"end":149}]},{"name":"f03d","type":9,"text":"The UI for revoking the refresh token in pub-credentials.json is not easy to find.","markups":[{"type":10,"start":41,"end":61},{"type":3,"start":4,"end":19,"href":"https://myaccount.google.com/permissions","title":"","rel":"","anchorType":0},{"type":2,"start":24,"end":37}]},{"name":"f4d8","type":1,"text":"Indeed, it has happened more than once that a package was published and it accidentally included the author’s pub-credentials.json file, because the author extracted the file inside a CI job. Publishing a package along with the credentials required to update the package is a pretty severe security vulnerability and we eventually implemented leak detection in dart pub publish.","markups":[{"type":10,"start":110,"end":130},{"type":10,"start":361,"end":377},{"type":3,"start":331,"end":357,"href":"https://dart.dev/go/false-secrets","title":"","rel":"","anchorType":0}]},{"name":"5a12","type":1,"text":"Our new automated publishing support mitigates these issues, making it possible to authenticate to pub.dev using one of the following:","markups":[]},{"name":"3cef","type":9,"text":"A temporary OIDC token signed by Github Actions.","markups":[{"type":3,"start":12,"end":47,"href":"https://docs.github.com/en/actions/deployment/security-hardening-your-deployments/about-security-hardening-with-openid-connect","title":"","rel":"","anchorType":0}]},{"name":"7a9e","type":9,"text":"A GCP service account that can be used from most GCP resources like Google Cloud Build or other cloud environments, such as Azure or AWS.","markups":[]},{"name":"2ef2","type":1,"text":"These flows enable automated publishing relying on long-lived secret tokens that can easily be abused, if leaked by accident. If deploying your publishing flow to a custom machine, you can, of course, rely on exported service account keys, but great care must be taken to properly secure such keys.","markups":[]},{"name":"333a","type":13,"text":"Enabling secure publishing","markups":[]},{"name":"5077","type":1,"text":"You can enable automated publishing from GitHub with just a few steps — see dart.dev/go/automated-publishing for all the details.","markups":[{"type":3,"start":76,"end":108,"href":"http://dart.dev/go/automated-publishing","title":"","rel":"","anchorType":0}]}],"sections":[{"name":"69ae","startIndex":0}]},"postDisplay":{"coverless":true}},"virtuals":{"statusForCollection":"APPROVED","allowNotes":true,"previewImage":{"imageId":"1*69KfhhHmmvZ6BLvypXjx2A.png","filter":"","backgroundSize":"","originalWidth":1999,"originalHeight":1092,"strategy":"resample","height":0,"width":0},"wordCount":697,"imageCount":3,"readingTime":3.1801886792452834,"subtitle":"We have a couple of new features available on pub.dev starting today: You can now declare screenshots for a package, enabling a more visual…","userPostRelation":{"userId":"8b6a7f6f197d","postId":"9bceb19edf79","readAt":0,"readLaterAddedAt":0,"votedAt":0,"collaboratorAddedAt":0,"notesAddedAt":0,"subscribedAt":0,"lastReadSectionName":"","lastReadVersionId":"","lastReadAt":0,"lastReadParagraphName":"","lastReadPercentage":0,"viewedAt":0,"presentedCountInResponseManagement":0,"clapCount":0,"seriesUpdateNotifsOptedInAt":0,"queuedAt":0,"seriesFirstViewedAt":0,"presentedCountInStream":3,"seriesLastViewedAt":0,"audioProgressSec":0},"publishedInCount":1,"usersBySocialRecommends":[],"noIndex":false,"recommends":25,"isBookmarked":false,"tags":[{"slug":"dartlang","name":"Dartlang","postCount":921,"metadata":{"postCount":921,"coverImage":{"id":"1*HNqQFQ2hdhAgjew1pIMqXA.png","originalWidth":2752,"originalHeight":1536,"isFeatured":true}},"type":"Tag"},{"slug":"github-actions","name":"Github Actions","postCount":6854,"metadata":{"postCount":6854,"coverImage":{"id":"0*5rOzZY4zr-oZ2zOF","originalWidth":3840,"originalHeight":2560,"isFeatured":true,"unsplashPhotoId":"XYeCKHcZNz8"}},"type":"Tag"},{"slug":"pubdev","name":"Pubdev","postCount":67,"metadata":{"postCount":67,"coverImage":{"id":"1*D3oqpM7crq57WIv8rwrZVw.jpeg","originalWidth":1920,"originalHeight":1280,"isFeatured":true}},"type":"Tag"},{"slug":"package","name":"Package","postCount":1541,"metadata":{"postCount":1541,"coverImage":{"id":"1*goDJ9W2VI12Isd5fu4eNvw.png","originalWidth":1536,"originalHeight":1024}},"type":"Tag"},{"slug":"package-management","name":"Package Management","postCount":740,"metadata":{"postCount":740,"coverImage":{"id":"1*tOhIAZPgUFMlm1x-oN8_vQ.jpeg","originalWidth":1408,"originalHeight":768,"isFeatured":true}},"type":"Tag"}],"socialRecommendsCount":0,"responsesCreatedCount":1,"links":{"entries":[{"url":"https://docs.github.com/en/actions/deployment/security-hardening-your-deployments/about-security-hardening-with-openid-connect","alts":[],"httpStatus":200},{"url":"https://dart.dev/go/false-secrets","alts":[],"httpStatus":200},{"url":"https://dart.dev/tools/pub/pubspec#screenshots","alts":[],"httpStatus":200},{"url":"https://myaccount.google.com/permissions","alts":[],"httpStatus":200},{"url":"http://dart.dev/go/automated-publishing","alts":[],"httpStatus":200}],"version":"0.3","generatedAt":1674064856257},"isLockedPreviewOnly":false,"metaDescription":"","totalClapCount":218,"sectionCount":1,"readingList":0,"topics":[{"topicId":"decb52b64abf","slug":"programming","createdAt":1493934116328,"deletedAt":0,"image":{"id":"1*iPa136b1cGEO7lvoXg6uHQ@2x.jpeg","originalWidth":6016,"originalHeight":4016},"name":"Programming","description":"The good, the bad, the buggy.","relatedTopics":[],"visibility":1,"relatedTags":[],"relatedTopicIds":[],"seoTitle":"Programming News and Articles — Medium","type":"Topic"}]},"coverless":true,"slug":"screenshots-and-automated-publishing-for-pub-dev","translationSourcePostId":"","translationSourceCreatorId":"","isApprovedTranslation":false,"inResponseToPostId":"","inResponseToRemovedAt":0,"isTitleSynthesized":true,"allowResponses":true,"importedUrl":"","importedPublishedAt":0,"visibility":0,"uniqueSlug":"screenshots-and-automated-publishing-for-pub-dev-9bceb19edf79","previewContent":{"bodyModel":{"paragraphs":[{"name":"previewImage","type":4,"text":"","layout":10,"metadata":{"id":"1*69KfhhHmmvZ6BLvypXjx2A.png","originalWidth":1999,"originalHeight":1092,"isFeatured":true}},{"name":"1485","type":3,"text":"Screenshots and automated publishing for pub.dev","markups":[],"alignment":1}],"sections":[{"startIndex":0}]},"isFullContent":false,"subtitle":"We have a couple of new features available on pub.dev starting today: You can now declare screenshots for a package, enabling a more visual…"},"license":1,"inResponseToMediaResourceId":"","canonicalUrl":"https://blog.dart.dev/screenshots-and-automated-publishing-for-pub-dev-9bceb19edf79","approvedHomeCollectionId":"23738d481ce8","isNewsletter":false,"newsletterId":"d41c4fc1c1ee","webCanonicalUrl":"https://blog.dart.dev/screenshots-and-automated-publishing-for-pub-dev-9bceb19edf79","mediumUrl":"https://blog.dart.dev/screenshots-and-automated-publishing-for-pub-dev-9bceb19edf79","migrationId":"","notifyFollowers":true,"notifyTwitter":false,"notifyFacebook":false,"responseHiddenOnParentPostAt":0,"isSeries":false,"isSubscriptionLocked":false,"seriesLastAppendedAt":0,"audioVersionDurationSec":0,"sequenceId":"","isEligibleForRevenue":false,"isBlockedFromHightower":false,"deletedAt":0,"lockedPostSource":0,"hightowerMinimumGuaranteeStartsAt":0,"hightowerMinimumGuaranteeEndsAt":0,"featureLockRequestAcceptedAt":0,"mongerRequestType":1,"layerCake":3,"socialTitle":"","socialDek":"","editorialPreviewTitle":"","editorialPreviewDek":"","curationEligibleAt":0,"primaryTopic":{"topicId":"decb52b64abf","slug":"programming","createdAt":1493934116328,"deletedAt":0,"image":{"id":"1*iPa136b1cGEO7lvoXg6uHQ@2x.jpeg","originalWidth":6016,"originalHeight":4016},"name":"Programming","description":"The good, the bad, the buggy.","relatedTopics":[],"visibility":1,"relatedTags":[],"relatedTopicIds":[],"seoTitle":"Programming News and Articles — Medium","type":"Topic"},"primaryTopicId":"decb52b64abf","isProxyPost":false,"proxyPostFaviconUrl":"","proxyPostProviderName":"","proxyPostType":0,"isSuspended":false,"isLimitedState":false,"seoTitle":"","previewContent2":{"bodyModel":{"paragraphs":[{"name":"1485","type":3,"text":"Screenshots and automated publishing for pub.dev","markups":[]},{"name":"7b37","type":1,"text":"We have a couple of new features available on pub.dev starting today: You can now declare screenshots for a package, enabling a more visual approach to search. And the publishing flow can now be fully automated, powered by GitHub Actions.","markups":[]},{"name":"2f64","type":3,"text":"Adding screenshots to pub.dev","markups":[]},{"name":"6a88","type":1,"text":"One of the core objectives of pub.dev is to make…","markups":[]}],"sections":[{"name":"69ae","startIndex":0}]},"isFullContent":false,"subtitle":"We have a couple of new features available on pub.dev starting today: You can now declare screenshots for a package, enabling a more visual…"},"cardType":0,"isDistributionAlertDismissed":false,"isShortform":false,"shortformType":0,"responsesLocked":false,"isLockedResponse":false,"isPublishToEmail":true,"responseDistribution":0,"isMarkedPaywallOnly":false,"type":"Post"},"mentionedUsers":[],"collaborators":[],"hideMeter":false,"shareKey":"1bd32e46c6decebb4555556484e255be","collectionUserRelations":[{"collectionId":"23738d481ce8","userId":"8b6a7f6f197d","role":"ADMIN"},{"collectionId":"4da7dfd21a33","userId":"8b6a7f6f197d","role":"WRITER"},{"collectionId":"24d8f4fa8912","userId":"8b6a7f6f197d","role":"WRITER"}],"mode":"canEdit","references":{"User":{"4a41236ee91e":{"userId":"4a41236ee91e","name":"Jonas Finnemann Jensen","username":"jonasfj","createdAt":1458688536576,"imageId":"1*9dn0P6YHJVXOAB6Tf6Y3bw.jpeg","backgroundImageId":"","bio":"","twitterScreenName":"","socialStats":{"userId":"4a41236ee91e","usersFollowedCount":1,"usersFollowedByCount":155,"type":"SocialStats"},"social":{"userId":"8b6a7f6f197d","targetUserId":"4a41236ee91e","type":"Social"},"allowNotes":1,"mediumMemberAt":0,"isWriterProgramEnrolled":true,"isSuspended":false,"isMembershipTrialEligible":true,"facebookDisplayName":"Jonas Finnemann Jensen","optInToIceland":true,"hasCompletedProfile":false,"userDismissableFlags":[1,2,8,12,18,29,30,33,53,58],"hasSeenIcelandOnboarding":false,"postSubscribeMembershipUpsellShownAt":0,"languageCode":"en-us","type":"User"}},"Collection":{"23738d481ce8":{"id":"23738d481ce8","name":"Dart","slug":"dartlang","tags":["MOBILE APP DEVELOPMENT","WEB DEVELOPMENT","DART","PROGRAMMING LANGUAGES","SOFTWARE DEVELOPMENT"],"creatorId":"a6d788faa5e5","description":"Dart is an approachable, portable, and productive language for high-quality apps on any platform. Learn more at https://dart.dev.","shortDescription":"Dart is an approachable, portable, and productive language…","image":{"imageId":"1*uWy1Ajpd0oTUQBO9WBHoQg@2x.png","filter":"","backgroundSize":"","originalWidth":1001,"originalHeight":1001,"strategy":"resample","height":0,"width":0},"metadata":{"followerCount":14031,"activeAt":1762974121956},"virtuals":{"permissions":{"canPublish":true,"canPublishAll":true,"canRepublish":true,"canRemove":true,"canManageAll":true,"canSubmit":true,"canEditPosts":true,"canAddWriters":true,"canViewStats":true,"canSendNewsletter":true,"canViewLockedPosts":true,"canViewCloaked":true,"canEditOwnPosts":true,"canBeAssignedAuthor":true,"canEnrollInHightower":false,"canLockPostsForMediumMembers":false,"canLockOwnPostsForMediumMembers":false,"canViewNewsletterV2Stats":true,"canCreateNewsletterV3":true},"isSubscribed":true,"isEnrolledInHightower":false,"isEligibleForHightower":false,"isSubscribedToCollectionEmails":false,"isMuted":false,"canToggleEmail":false,"isWriter":false},"logo":{"imageId":"1*NRb7RFVWJQFzY47j3v4U7Q.png","filter":"","backgroundSize":"","originalWidth":400,"originalHeight":154,"strategy":"resample","height":0,"width":0},"twitterUsername":"dart_lang","publicEmail":"medium@dartlang.org","domain":"blog.dart.dev","sections":[{"type":2,"collectionHeaderMetadata":{"title":"Dart","description":"An approachable, portable, and productive language for high-quality apps on any platform","backgroundImage":{},"logoImage":{"id":"1*knHF_qpxdtS8h0Z8EeqowA@2x.png","originalWidth":1080,"originalHeight":1080,"alt":"Dart"},"alignment":2,"layout":5}},{"type":1,"postListMetadata":{"source":1,"layout":4,"number":7,"postIds":[]}},{"type":1,"postListMetadata":{"source":1,"layout":5,"number":15,"postIds":[]}}],"tintColor":"#FF042B59","lightText":true,"favicon":{"imageId":"","filter":"","backgroundSize":"","originalWidth":0,"originalHeight":0,"strategy":"resample","height":0,"width":0},"colorPalette":{"defaultBackgroundSpectrum":{"colorPoints":[{"color":"#FF6588BA","point":0},{"color":"#FF607EAB","point":0.1},{"color":"#FF59759C","point":0.2},{"color":"#FF536B8E","point":0.3},{"color":"#FF4C617F","point":0.4},{"color":"#FF445670","point":0.5},{"color":"#FF3D4B61","point":0.6},{"color":"#FF344052","point":0.7},{"color":"#FF2B3442","point":0.8},{"color":"#FF212832","point":0.9},{"color":"#FF161A22","point":1}],"backgroundColor":"#FFFFFFFF"},"tintBackgroundSpectrum":{"colorPoints":[{"color":"#FF042B59","point":0},{"color":"#FF294871","point":0.1},{"color":"#FF456087","point":0.2},{"color":"#FF5F779B","point":0.3},{"color":"#FF788DAD","point":0.4},{"color":"#FF8FA2BF","point":0.5},{"color":"#FFA5B6CF","point":0.6},{"color":"#FFBBC9DF","point":0.7},{"color":"#FFD1DCEE","point":0.8},{"color":"#FFE6EEFC","point":0.9},{"color":"#FFFBFFFF","point":1}],"backgroundColor":"#FF042B59"},"highlightSpectrum":{"colorPoints":[{"color":"#FFECF3FF","point":0},{"color":"#FFE9F2FF","point":0.1},{"color":"#FFE5F0FF","point":0.2},{"color":"#FFE2EFFF","point":0.3},{"color":"#FFDEEDFF","point":0.4},{"color":"#FFDBEBFF","point":0.5},{"color":"#FFD7EAFF","point":0.6},{"color":"#FFD3E8FF","point":0.7},{"color":"#FFCFE6FF","point":0.8},{"color":"#FFCBE5FF","point":0.9},{"color":"#FFC8E3FF","point":1}],"backgroundColor":"#FFFFFFFF"},"darkBackgroundSpectrum":{"colorPoints":[{"color":"#FF7DA0D3","point":0},{"color":"#FF89A9D8","point":0.1},{"color":"#FF94B1DC","point":0.2},{"color":"#FFA0B9E0","point":0.3},{"color":"#FFABC1E3","point":0.4},{"color":"#FFB6C9E7","point":0.5},{"color":"#FFC0D1EB","point":0.6},{"color":"#FFCBD8EF","point":0.7},{"color":"#FFD5E0F2","point":0.8},{"color":"#FFE0E7F6","point":0.9},{"color":"#FFEAEFFA","point":1}],"backgroundColor":"#FF000000"}},"navItems":[{"type":1,"title":"Announcements","tagSlug":"announcements","url":"https://blog.dart.dev/tagged/announcements","source":"tagSlug"},{"type":5,"title":"Archive","url":"https://blog.dart.dev/archive"},{"type":3,"title":"dart.dev","url":"https://dart.dev"}],"colorBehavior":2,"collectionFeatures":[25],"ampLogo":{"imageId":"","filter":"","backgroundSize":"","originalWidth":0,"originalHeight":0,"strategy":"resample","height":0,"width":0},"header":{"title":"Dart","description":"An approachable, portable, and productive language for high-quality apps on any platform","backgroundImage":{},"logoImage":{"id":"1*knHF_qpxdtS8h0Z8EeqowA@2x.png","originalWidth":1080,"originalHeight":1080,"alt":"Dart"},"alignment":2,"layout":5},"subscriberCount":14031,"tagline":"Dart is a client-optimized language for fast apps on any platform.","isOptedIntoAurora":false,"isCurationAllowedByDefault":false,"polarisCoverImage":{"imageId":"","filter":"","backgroundSize":"","originalWidth":0,"originalHeight":0,"strategy":"resample","height":0,"width":0},"ptsQualifiedAt":1616092887098,"type":"Collection"}},"Social":{"4a41236ee91e":{"userId":"8b6a7f6f197d","targetUserId":"4a41236ee91e","type":"Social"}},"SocialStats":{"4a41236ee91e":{"userId":"4a41236ee91e","usersFollowedCount":1,"usersFollowedByCount":155,"type":"SocialStats"}}}},"v":3,"b":"20260130-1012-root"}
{"success":true,"payload":{"value":{"id":"f1ccaf9f546c","versionId":"1038799b47db","creatorId":"9e0692285f8b","homeCollectionId":"23738d481ce8","title":"Making Dart a Better Language for UI","detectedLanguage":"en","latestVersion":"1038799b47db","latestPublishedVersion":"1038799b47db","hasUnpublishedEdits":false,"latestRev":892,"createdAt":1552602519645,"updatedAt":1639007317138,"acceptedAt":0,"firstPublishedAt":1553024179738,"latestPublishedAt":1553024179738,"vote":true,"experimentalCss":"","displayAuthor":"","content":{"subtitle":"On the Dart team, we are busy implementing a handful of language changes that I’m really excited about. They all relate to collection…","bodyModel":{"paragraphs":[{"name":"7295","type":3,"text":"Making Dart a Better Language for UI","markups":[]},{"name":"55ae","type":4,"text":"","markups":[],"layout":1,"metadata":{"id":"1*4PIeARfthvxtn0cvBB5MPw.jpeg","originalWidth":2048,"originalHeight":1220,"isFeatured":true}},{"name":"e0cc","type":1,"text":"On the Dart team, we are busy implementing a handful of language changes that I’m really excited about. They all relate to collection literals, the built-in syntax for creating lists, maps, and sets:","markups":[{"type":3,"start":7,"end":11,"href":"https://www.dartlang.org/","title":"","rel":"","anchorType":0}]},{"name":"1750","type":11,"text":"","markups":[],"layout":1,"iframe":{"mediaResourceId":"9a301b4329f5856c288f1bdf646f4dfa","thumbnailUrl":"https://i.embed.ly/1/image?url=https%3A%2F%2Favatars0.githubusercontent.com%2Fu%2F46275%3Fs%3D400%26v%3D4&key=a19fcc184b9711e1b4764040d3dc5c07"}},{"name":"55d1","type":1,"text":"If you aren’t writing Dart code today, this may not be super relevant to you and your Life Goals, but I hope you’ll keep reading anyway. I think the features are interesting in their own right, and the execution model that underlies them might stretch your brain in useful and/or engaging ways. I always find it fun to learn about new language stuff, even in languages I don’t currently use.","markups":[]},{"name":"0441","type":3,"text":"How Flutter Users Build Their UI","markups":[]},{"name":"621f","type":1,"text":"If you heard anything about Dart in the past year, it was probably in the context of Flutter. If that name doesn’t ring a bell, Flutter is a UI framework for building multi-platform mobile apps. I can’t do it justice here, but click the link and it will answer every question in your heart. (Well, at least every question regarding Flutter. It won’t tell you why that high school crush never called you back.)","markups":[{"type":3,"start":85,"end":92,"href":"https://flutter.dev/","title":"","rel":"nofollow","anchorType":0}]},{"name":"f689","type":1,"text":"A key choice any UI framework makes is how the basic visual UI elements — buttons, colors, text, layout, etc. — are defined. Do you author these in some sort of separate “template” or “markup” format or right in the executable code where the UI’s behavior is defined? Every fifteen years or so, the industry flips on which answer is the right one.","markups":[]},{"name":"5eaf","type":1,"text":"Angular and most web frameworks follow in the footsteps of HTML and use templates. React puts the UI inside your JavaScript, but also adds an embedded DSL called JSX to make it look like HTML. Trying to have its cake and eat it too, I guess, though not everyone would describe HTML as particularly dessert-like.","markups":[{"type":3,"start":0,"end":7,"href":"https://angular.io/","title":"","rel":"nofollow","anchorType":0},{"type":3,"start":83,"end":88,"href":"https://reactjs.org/","title":"","rel":"nofollow","anchorType":0},{"type":3,"start":162,"end":165,"href":"https://reactjs.org/docs/introducing-jsx.html","title":"","rel":"nofollow","anchorType":0}]},{"name":"9ff4","type":1,"text":"Flutter puts the UI right into your Dart code, using normal Dart expression syntax. Behold:","markups":[]},{"name":"6ee3","type":11,"text":"","markups":[],"layout":1,"iframe":{"mediaResourceId":"bee5624389aa5e9587f83a4abf544f7e","thumbnailUrl":"https://i.embed.ly/1/image?url=https%3A%2F%2Favatars0.githubusercontent.com%2Fu%2F46275%3Fs%3D400%26v%3D4&key=a19fcc184b9711e1b4764040d3dc5c07"}},{"name":"0927","type":1,"text":"Everything after that return keyword is one big nested expression that produces a chunk of user interface. Using Dart for this has a handful of material benefits:","markups":[{"type":10,"start":22,"end":28}]},{"name":"0b2e","type":9,"text":"There’s only one language to learn: Dart. Since Dart was designed to be familiar to people coming from other languages, that’s hopefully not too difficult.","markups":[{"type":1,"start":0,"end":41}]},{"name":"0b60","type":9,"text":"You can use all of the abstraction features of a general-purpose programming language when building your UI. Hoist pieces out into reusable functions. Give those functions parameters to vary the generated UI. Store things in local variables. You do you.","markups":[{"type":1,"start":0,"end":108}]},{"name":"d126","type":9,"text":"You never hit an expressiveness wall and have to port to a different language. If you’ve ever used a declarative language, you’ve probably run into the situation where you hit the limit of what it can actually express. At that point, you either abandon what you were trying to do, or laboriously rewrite the whole thing in a lower level, usually imperative language. Since you’re already in a full-featured language with Dart, you never hit that wall and your UI code smoothly grows in sophistication.","markups":[{"type":1,"start":0,"end":78},{"type":2,"start":388,"end":390}]},{"name":"f45f","type":1,"text":"The main challenge, of course, and the reason why people make declarative languages in the first place, is that defining stuff in an imperative language can be really tedious and difficult to read.","markups":[]},{"name":"2a43","type":1,"text":"Imagine that instead of this little bit of HTML:","markups":[]},{"name":"6b97","type":11,"text":"","markups":[],"layout":1,"iframe":{"mediaResourceId":"57a1716e8650bd51a1e3d9791f731b86","thumbnailUrl":"https://i.embed.ly/1/image?url=https%3A%2F%2Favatars0.githubusercontent.com%2Fu%2F46275%3Fs%3D400%26v%3D4&key=a19fcc184b9711e1b4764040d3dc5c07"}},{"name":"40ee","type":1,"text":"You had to write something like:","markups":[]},{"name":"fae5","type":11,"text":"","markups":[],"layout":1,"iframe":{"mediaResourceId":"15a57d48b23ef533d30f20925f396562","thumbnailUrl":"https://i.embed.ly/1/image?url=https%3A%2F%2Favatars0.githubusercontent.com%2Fu%2F46275%3Fs%3D400%26v%3D4&key=a19fcc184b9711e1b4764040d3dc5c07"}},{"name":"3a58","type":1,"text":"Fortunately, modern languages and APIs aren’t quite that low level. Even though statements are imperative, expressions are pretty declarative. While the above code is gnarly, this one is about on par with HTML:","markups":[{"type":2,"start":52,"end":56},{"type":2,"start":107,"end":118}]},{"name":"53b0","type":11,"text":"","markups":[],"layout":1,"iframe":{"mediaResourceId":"f539ad3ea859d65450839a28c9af6fe4","thumbnailUrl":"https://i.embed.ly/1/image?url=https%3A%2F%2Favatars0.githubusercontent.com%2Fu%2F46275%3Fs%3D400%26v%3D4&key=a19fcc184b9711e1b4764040d3dc5c07"}},{"name":"2b60","type":1,"text":"The modern reactive paradigm where you “build” your UI by constructing it from scratch as a single expression gets you pretty far. The relevant part of the Flutter example up there is just:","markups":[]},{"name":"0bda","type":11,"text":"","markups":[],"layout":1,"iframe":{"mediaResourceId":"7dfbfea89e37769c90ec5f7b5af11ae1","thumbnailUrl":"https://i.embed.ly/1/image?url=https%3A%2F%2Favatars0.githubusercontent.com%2Fu%2F46275%3Fs%3D400%26v%3D4&key=a19fcc184b9711e1b4764040d3dc5c07"}},{"name":"37f4","type":1,"text":"It’s got parentheses and square brackets instead of angle brackets, but is otherwise not too far from a “markup” language. It’s surprising how well this works. Dart’s syntax is based on JavaScript, which got it from Java, which got it from C. Along the way, we added the square bracket list literal syntax and named parameters, but those are fairly minor.","markups":[]},{"name":"c908","type":1,"text":"C was designed for implementing command-line operating systems on the PDP-11. The fact that its notation scales not too badly to building graphical UIs on mobile devices is either a testament to Ritchie’s design taste, or our collective Stockholm Syndrome around C syntax. Either way, it works… mostly.","markups":[{"type":2,"start":116,"end":120}]},{"name":"6b81","type":1,"text":"In the example here, there’s no interesting runtime logic required to build the UI. Everything fits nicely into a single nested expression. But let’s say, for whatever reason, you don’t want to show the “This is Flutter” part of the text on Tuesdays. (Perhaps you need to make room on screen for the “Taco Tuesday!” banner.)","markups":[{"type":2,"start":52,"end":57}]},{"name":"2324","type":1,"text":"There are a few ways to express that, but none of them feel as nice and declarative as the above example. Here’s one:","markups":[]},{"name":"8b39","type":11,"text":"","markups":[],"layout":1,"iframe":{"mediaResourceId":"704cb9b46e03e2851bcbf30991ef04db","thumbnailUrl":"https://i.embed.ly/1/image?url=https%3A%2F%2Favatars0.githubusercontent.com%2Fu%2F46275%3Fs%3D400%26v%3D4&key=a19fcc184b9711e1b4764040d3dc5c07"}},{"name":"faa5","type":1,"text":"We’re a lot closer to the nasty low-level imperative code that drives people to using templates. When we looked at real Flutter code, we were sad to see a lot that looked like this. So, about a year ago, the Flutter team asked us on Dart to come up with language changes to make UI code written in Dart easier to write, read, and maintain.","markups":[]},{"name":"de84","type":3,"text":"“UI as Code”","markups":[]},{"name":"8c79","type":1,"text":"We called this initiative “UI as code”, since it’s about building your UI using code. But the ultimate goal is language features that are generally applicable to as many Dart programs, Flutter or not, as possible. (If you want a lot more background, here’s a long motivation doc I wrote.)","markups":[{"type":3,"start":27,"end":37,"href":"https://github.com/munificent/ui-as-code","title":"","rel":"","anchorType":0},{"type":3,"start":257,"end":278,"href":"https://github.com/munificent/ui-as-code/blob/master/Motivation.md","title":"","rel":"","anchorType":0}]},{"name":"b4e0","type":1,"text":"After exploring a bunch of options, we decided to focus on a few targeted improvements around collection literals. This may not seem as sexy as jamming something like JSX into Dart (not that I’m entirely ruling that out), but it has the advantage of being much easier for users to incrementally take advantage of in their code.","markups":[{"type":3,"start":16,"end":34,"href":"https://github.com/munificent/ui-as-code/blob/master/Choices.md","title":"","rel":"","anchorType":0}]},{"name":"4a32","type":1,"text":"Just making list literals groovier might seem to have, uh, limited impact. But, if you look at Flutter UI code like the above, it’s basically a big tree of constructor calls and list literals. List literals are a large fraction of the territory. (Heck, entire languages have been designed around them.) If you dig into examples where it feels like you should be able to write something declaratively but instead have to do a bunch of gross imperative mutation, it’s very often around lists.","markups":[{"type":3,"start":253,"end":269,"href":"https://en.wikipedia.org/wiki/Lisp_(programming_language)","title":"","rel":"nofollow","anchorType":0}]},{"name":"3c73","type":1,"text":"If we can make collections better, we can make a lot of Dart code better. To that end, we’re adding three new features:","markups":[{"type":2,"start":49,"end":52}]},{"name":"20c4","type":3,"text":"Spreads","markups":[]},{"name":"be90","type":1,"text":"Often, when you build a list of widgets, some of those widgets are already in some other list. Here’s a bit of Flutter code:","markups":[{"type":2,"start":83,"end":88}]},{"name":"ff82","type":11,"text":"","markups":[],"layout":1,"iframe":{"mediaResourceId":"aa16f0f829d91242489ca6c470b64f9e","thumbnailUrl":"https://i.embed.ly/1/image?url=https%3A%2F%2Favatars0.githubusercontent.com%2Fu%2F46275%3Fs%3D400%26v%3D4&key=a19fcc184b9711e1b4764040d3dc5c07"}},{"name":"5e30","type":1,"text":"The buildTab2Conversation() method returns a list of widgets that we want to surround with the header and footer. Having to build the resulting list imperatively is a real drag. It forces the code to read \"backwards\" where you see a bunch of stuff mucking around with the children before you get to the code to see what they are the children of.","markups":[{"type":10,"start":4,"end":27},{"type":2,"start":342,"end":344}]},{"name":"f15b","type":1,"text":"Dart has this feature called method cascades that helps somewhat. Those let you stuff a mutating method call in the middle of an expression while yielding the original object. With that, you get:","markups":[{"type":3,"start":29,"end":44,"href":"https://news.dartlang.org/2012/02/method-cascades-in-dart-posted-by-gilad.html","title":"","rel":"nofollow","anchorType":0}]},{"name":"49a4","type":11,"text":"","markups":[],"layout":1,"iframe":{"mediaResourceId":"17a63c04c6c19afbf3b240059741d8d0","thumbnailUrl":"https://i.embed.ly/1/image?url=https%3A%2F%2Favatars0.githubusercontent.com%2Fu%2F46275%3Fs%3D400%26v%3D4&key=a19fcc184b9711e1b4764040d3dc5c07"}},{"name":"0e02","type":1,"text":"That’s kind of better, but it’s still pretty awkward. That trailing ..add() to append a single item is particularly egregious. You can probably guess how we fixed this since a number of other languages already have the same solution. (>90% of language design is figuring out which features to borrow from other languages.) We’re adding a new syntax called spreads.","markups":[{"type":10,"start":68,"end":75},{"type":3,"start":336,"end":363,"href":"https://github.com/dart-lang/language/blob/master/accepted/future-releases/spread-collections/feature-specification.md","title":"","rel":"","anchorType":0},{"type":2,"start":356,"end":363}]},{"name":"3cea","type":1,"text":"Inside a collection literal, a spread unpacks another collection and inserts its contents directly in place. For example:","markups":[]},{"name":"019b","type":11,"text":"","markups":[],"layout":1,"iframe":{"mediaResourceId":"67060f95e444412f1cd1e9e9a23dcba4","thumbnailUrl":"https://i.embed.ly/1/image?url=https%3A%2F%2Favatars0.githubusercontent.com%2Fu%2F46275%3Fs%3D400%26v%3D4&key=a19fcc184b9711e1b4764040d3dc5c07"}},{"name":"8fe2","type":1,"text":"The ... before the list element causes its elements to be interpolated into the surrounding list. This is the same syntax JavaScript uses. Python, Ruby, and a few others use a prefix * for the same thing, but we felt that didn't stand out visually enough. With this feature, the Flutter example becomes:","markups":[{"type":10,"start":4,"end":7},{"type":10,"start":183,"end":184}]},{"name":"f7af","type":11,"text":"","markups":[],"layout":1,"iframe":{"mediaResourceId":"2b07710a5405bc337f65a570e4ef2ec1","thumbnailUrl":"https://i.embed.ly/1/image?url=https%3A%2F%2Favatars0.githubusercontent.com%2Fu%2F46275%3Fs%3D400%26v%3D4&key=a19fcc184b9711e1b4764040d3dc5c07"}},{"name":"e518","type":1,"text":"I believe this is a real improvement. All of the children of the list view are nestled snug in the one list literal. This looks nicer, and also plays nicer with type inference. With all of the elements inside the list, we can use all of them when inferring the list’s type.","markups":[]},{"name":"2152","type":1,"text":"I’m showing a Flutter example here, but I spent a lot of time combing through a huge corpus of Dart code to see where this syntax would be useful and it comes into play all over the place. In particular, code that builds lists of command line arguments for invoking other programs really benefits from spreads.","markups":[]},{"name":"8c10","type":3,"text":"Elements","markups":[]},{"name":"8c17","type":1,"text":"Before I get into the last two features, I want to dig into what a spread actually is. It will seem like I’m belaboring the point, but I promise being clear on this will be helpful later. Here’s a leading question: is a spread an expression?","markups":[{"type":2,"start":83,"end":85},{"type":2,"start":215,"end":241}]},{"name":"0496","type":1,"text":"It seems like one, because it appears in a list literal in a place where an expression is expected:","markups":[]},{"name":"1781","type":11,"text":"","markups":[],"layout":1,"iframe":{"mediaResourceId":"109f6b354713e4066c65071197624180","thumbnailUrl":"https://i.embed.ly/1/image?url=https%3A%2F%2Favatars0.githubusercontent.com%2Fu%2F46275%3Fs%3D400%26v%3D4&key=a19fcc184b9711e1b4764040d3dc5c07"}},{"name":"b8c3","type":1,"text":"Like an expression, you evaluate it and it produces some data. Maybe it’s an expression that evaluates to an Iterable object? But, wait, that doesn’t make sense. That’s what the expression inside the spread does. If you just want an expression that evaluates to an Iterable, there’s no need to put the ... before it.","markups":[{"type":10,"start":302,"end":305},{"type":3,"start":109,"end":117,"href":"https://api.dartlang.org/stable/2.2.0/dart-core/Iterable-class.html","title":"","rel":"nofollow","anchorType":0},{"type":2,"start":189,"end":195}]},{"name":"3779","type":1,"text":"A spread doesn’t evaluate to a single Iterable object, it unpacks that object and evaluates to the series of objects produced by the Iterable. It wouldn’t be useful to then repack that back into some new object. But an expression always evaluates to a single object.","markups":[{"type":2,"start":58,"end":65},{"type":2,"start":99,"end":105},{"type":2,"start":173,"end":179},{"type":2,"start":252,"end":258}]},{"name":"5f83","type":1,"text":"If a spread was an expression, what would it mean to use one in other places where an expression is allowed?","markups":[]},{"name":"633e","type":11,"text":"","markups":[],"layout":1,"iframe":{"mediaResourceId":"97f4df23240dcff5b1063ee56af6daa6","thumbnailUrl":"https://i.embed.ly/1/image?url=https%3A%2F%2Favatars0.githubusercontent.com%2Fu%2F46275%3Fs%3D400%26v%3D4&key=a19fcc184b9711e1b4764040d3dc5c07"}},{"name":"f1ff","type":1,"text":"What would this do? It doesn’t make sense to store the entire Iterable as an object in wat. If you wanted that, you could just omit the ... entirely. The answer is that spreads aren't expressions. They are a different kind of syntactic category. Dart, like many languages, already has two big syntax groups: statements and expressions.","markups":[{"type":10,"start":87,"end":90},{"type":10,"start":136,"end":139},{"type":2,"start":177,"end":183}]},{"name":"396c","type":1,"text":"Statements are executed but don’t produce any result value. Instead, they are expected to have some useful side effect. They can’t be used in any context where a value is needed because it won’t give you one. That’s why, say, this is forbidden:","markups":[]},{"name":"5a19","type":11,"text":"","markups":[],"layout":1,"iframe":{"mediaResourceId":"3966f533c5c08e16d9f3d7debe2c72a8","thumbnailUrl":"https://i.embed.ly/1/image?url=https%3A%2F%2Favatars0.githubusercontent.com%2Fu%2F46275%3Fs%3D400%26v%3D4&key=a19fcc184b9711e1b4764040d3dc5c07"}},{"name":"43b8","type":1,"text":"A for statement doesn't produce a value, so it doesn't make sense to stuff one in a variable initializer. There are languages that unify expressions and statements and allow code like this. They define each statement to execute in some way and also produce a value. But Dart isn't one of those languages.","markups":[{"type":10,"start":2,"end":5},{"type":3,"start":116,"end":163,"href":"https://en.wikipedia.org/wiki/Expression-oriented_programming_language","title":"","rel":"","anchorType":0},{"type":2,"start":112,"end":116},{"type":2,"start":244,"end":248}]},{"name":"f600","type":1,"text":"Expressions evaluate to a single result value. You can use them in places where a value is useful. There are also “expression statements” — an expression followed by a semicolon — which are statements that contain a single expression. Handy since many expressions do also happen to have side effects and are useful even when their result isn’t needed.","markups":[{"type":3,"start":115,"end":136,"href":"https://www.eskimo.com/~scs/cclass/notes/sx3a.html","title":"","rel":"nofollow","anchorType":0}]},{"name":"5949","type":1,"text":"A spread is neither of those. A spread can evaluate to zero values (if you spread an empty collection), one value, or many. It’s its own kind of thing. A good name for this category would be “generator”. My model for this comes from Icon where every expression can be a generator. But Dart already has generator functions so I didn’t want to overload the term.","markups":[{"type":3,"start":233,"end":237,"href":"https://en.wikipedia.org/wiki/Icon_(programming_language)#Generators","title":"","rel":"nofollow","anchorType":0},{"type":3,"start":302,"end":321,"href":"https://www.dartlang.org/articles/language/beyond-async#generators","title":"","rel":"nofollow","anchorType":0},{"type":2,"start":244,"end":249}]},{"name":"d055","type":1,"text":"A spread can only appear in a place that can gracefully handle receiving zero or more values. Without completely overhauling the language’s execution model and turning it into Icon (which I find strangely appealing, but probably not practical…), there aren’t too many places that fit that constraint. Basically collection literals and maybe positional argument lists. (I wrote a proposal for the latter, but it’s quite complex so we aren’t doing it, at least not right now.)","markups":[{"type":3,"start":377,"end":402,"href":"https://github.com/munificent/ui-as-code/blob/master/in-progress/parameter-freedom.md","title":"","rel":"","anchorType":0}]},{"name":"a321","type":1,"text":"That leaves inside the body of collection literals. Based on that, I call these “elements”. An element is a piece of code that when evaluated produces zero or more values. Those values are then interpolated in place into the surrounding context where they appear. So, in a list, they become a series of elements in the new list. In a map, they become a series of key/value pairs. You get the idea.","markups":[]},{"name":"fbb4","type":1,"text":"The body of a collection literal can thus contain either expressions or elements. Allowing two categories is a little confusing, but fortunately we can simplify this by saying that a collection only contains elements. Then we define an “expression element” to be an element containing a single expression. The element always produces one result — the value of the expression. Sort of like the element equivalent of an expression statement.","markups":[]},{"name":"adc7","type":1,"text":"Right, so that’s where we are. We’ve changed collections to contain elements instead of expressions and defined two kinds of elements, spreads and expression elements. To evaluate a collection literal, you walk the elements, evaluate each one, and concatenate (or union in the case of a set) all of the resulting objects.","markups":[]},{"name":"4324","type":1,"text":"With that model in mind, we can walk through the other two new features:","markups":[]},{"name":"f399","type":3,"text":"Collection If","markups":[]},{"name":"2cf1","type":1,"text":"Write any Flutter code and you pretty quickly run into cases where the tree of widgets you want to build changes based on some condition. Say we have:","markups":[]},{"name":"4ecb","type":11,"text":"","markups":[],"layout":1,"iframe":{"mediaResourceId":"072107afe88a64be99a02468120afdef","thumbnailUrl":"https://i.embed.ly/1/image?url=https%3A%2F%2Favatars0.githubusercontent.com%2Fu%2F46275%3Fs%3D400%26v%3D4&key=a19fcc184b9711e1b4764040d3dc5c07"}},{"name":"25d1","type":1,"text":"Later, we decide that we want to use a different search button on Android. You can already do that using a conditional expression:","markups":[]},{"name":"ebc8","type":11,"text":"","markups":[],"layout":1,"iframe":{"mediaResourceId":"5efc7ff8b897dd4d5b6eae7fb35a4bd3","thumbnailUrl":"https://i.embed.ly/1/image?url=https%3A%2F%2Favatars0.githubusercontent.com%2Fu%2F46275%3Fs%3D400%26v%3D4&key=a19fcc184b9711e1b4764040d3dc5c07"}},{"name":"0729","type":1,"text":"This works OK, though I’ve never found C’s conditional operator very easy to read. Often, though, you don’t want to swap out a widget based on a condition, you want to simply omit one. Let’s say you don’t want to show a search box on Android at all. Today, Flutter users tend to use one of two patterns. This is one:","markups":[{"type":2,"start":116,"end":124},{"type":2,"start":175,"end":179}]},{"name":"81db","type":11,"text":"","markups":[],"layout":1,"iframe":{"mediaResourceId":"39ddc8aac984d2fcd49ab5f849f0cfe5","thumbnailUrl":"https://i.embed.ly/1/image?url=https%3A%2F%2Favatars0.githubusercontent.com%2Fu%2F46275%3Fs%3D400%26v%3D4&key=a19fcc184b9711e1b4764040d3dc5c07"}},{"name":"4a05","type":1,"text":"It forces you to rearrange the entire function by hoisting the child list out and building it imperatively before you use it. The other pattern looks like:","markups":[]},{"name":"e543","type":11,"text":"","markups":[],"layout":1,"iframe":{"mediaResourceId":"171e6899189aef91942841b006718783","thumbnailUrl":"https://i.embed.ly/1/image?url=https%3A%2F%2Favatars0.githubusercontent.com%2Fu%2F46275%3Fs%3D400%26v%3D4&key=a19fcc184b9711e1b4764040d3dc5c07"}},{"name":"324d","type":1,"text":"This uses a conditional expression which sometimes produces a null and then filters that null out of the resulting list. Props to whoever came up with this, but it's not something any user should have to write to accomplish such a simple task. Simple problems should have simple solutions, and small conceptual changes to your program shouldn't require large textual changes.","markups":[{"type":10,"start":62,"end":66},{"type":10,"start":89,"end":93}]},{"name":"6d37","type":1,"text":"Here’s the new thing. For the first example where we want a different button on Android, it looks like this:","markups":[]},{"name":"cf4c","type":11,"text":"","markups":[],"layout":1,"iframe":{"mediaResourceId":"b1ef984cb6f93e08c355a3acf47c5fae","thumbnailUrl":"https://i.embed.ly/1/image?url=https%3A%2F%2Favatars0.githubusercontent.com%2Fu%2F46275%3Fs%3D400%26v%3D4&key=a19fcc184b9711e1b4764040d3dc5c07"}},{"name":"5c1b","type":1,"text":"Instead of ?:, it uses the familiar if and else syntax. This is literally just a few tokens different from the existing conditional expression, so it doesn't seem to carry its weight. The more interesting case is when we want to omit the button on Android:","markups":[{"type":10,"start":11,"end":13},{"type":10,"start":36,"end":38},{"type":10,"start":43,"end":47},{"type":2,"start":229,"end":233}]},{"name":"9f19","type":11,"text":"","markups":[],"layout":1,"iframe":{"mediaResourceId":"e1c9d56f9e880ad57fde781aa9f61f4f","thumbnailUrl":"https://i.embed.ly/1/image?url=https%3A%2F%2Favatars0.githubusercontent.com%2Fu%2F46275%3Fs%3D400%26v%3D4&key=a19fcc184b9711e1b4764040d3dc5c07"}},{"name":"430d","type":1,"text":"Note there’s no else clause. Both of these examples look pretty similar to languages like Ruby where if is an expression. But an expression must always evaluate to a value, even when the condition is false. In Ruby, in that case, it implicitly evaluates to nil.","markups":[{"type":10,"start":16,"end":20},{"type":10,"start":101,"end":103},{"type":10,"start":257,"end":260}]},{"name":"9a6e","type":1,"text":"But that’s not what you want here. You don’t want to end up with a null element in your list of child widgets. That's why the conditional expression example up there had to use the annoying where() to filter it out. Fortunately, that's not a problem here. Because if inside a collection isn't an expression. It's an element.","markups":[{"type":10,"start":67,"end":71},{"type":10,"start":190,"end":197},{"type":10,"start":264,"end":266},{"type":2,"start":11,"end":14},{"type":2,"start":296,"end":306},{"type":2,"start":316,"end":323}]},{"name":"8bf2","type":1,"text":"Now you see why I was dragging you through all that stuff with spreads. Elements give us the foundation to have an ifsyntax that lets you completely omit an element from a collection. The if element produces a single value if the condition is true, or if there is an else case. If the condition is false and there is no else clause, it simply produces no values at all.","markups":[{"type":10,"start":115,"end":117},{"type":10,"start":188,"end":190},{"type":10,"start":267,"end":271},{"type":10,"start":320,"end":324}]},{"name":"a413","type":1,"text":"I think this behavior is really useful, but it’s also confusing if you look at the code and expect if to act like a simple expression.","markups":[{"type":10,"start":99,"end":101}]},{"name":"86a3","type":3,"text":"Collection For","markups":[]},{"name":"c172","type":1,"text":"The previous feature takes an existing bit of Dart statement syntax and repurposes it to do something useful in the context of a collection. Are there any other statement forms worth taking?","markups":[]},{"name":"84b5","type":1,"text":"Most don’t make sense. Sticking a return statement in there wouldn't do anything useful since it would just exit the surrounding function. while isn't very useful either. In order to exit a while loop, the body typically contains a break, return, or some kind of side effect like an assignment. But that implies the body contains statements, which isn't what we want. The goal is to make collections more expressive, not more imperative.","markups":[{"type":10,"start":34,"end":40},{"type":10,"start":139,"end":144},{"type":10,"start":190,"end":195},{"type":10,"start":232,"end":237},{"type":10,"start":239,"end":245},{"type":2,"start":330,"end":340},{"type":2,"start":405,"end":415},{"type":2,"start":426,"end":436}]},{"name":"f511","type":1,"text":"I dug through a bunch of collection literals in existing code looking for patterns I thought could be improved by new syntax. The main one, by far, was if. But I saw a number of places that I thought could be improved by for. Here's a slightly cleaned up example of some code I found:","markups":[{"type":10,"start":152,"end":154},{"type":10,"start":221,"end":224}]},{"name":"1e20","type":11,"text":"","markups":[],"layout":1,"iframe":{"mediaResourceId":"2264e586cab6282249bfe3edd474ddeb","thumbnailUrl":"https://i.embed.ly/1/image?url=https%3A%2F%2Favatars0.githubusercontent.com%2Fu%2F46275%3Fs%3D400%26v%3D4&key=a19fcc184b9711e1b4764040d3dc5c07"}},{"name":"72e6","type":1,"text":"All of the command.add() stuff feels needlessly imperative. If we allow for loops inside a collection literal, this becomes:","markups":[{"type":10,"start":11,"end":24},{"type":10,"start":72,"end":75}]},{"name":"968f","type":11,"text":"","markups":[],"layout":1,"iframe":{"mediaResourceId":"41ad41995c1a44493bd7e9f69058becb","thumbnailUrl":"https://i.embed.ly/1/image?url=https%3A%2F%2Favatars0.githubusercontent.com%2Fu%2F46275%3Fs%3D400%26v%3D4&key=a19fcc184b9711e1b4764040d3dc5c07"}},{"name":"44a8","type":3,"text":"Composing Elements","markups":[]},{"name":"ac42","type":1,"text":"Given that we are already adding spreads, the for syntax doesn't seem very compelling. Couldn't you accomplish the same thing using spread with some combination of higher-order methods on iterables? Yes, you can. You'd get something like:","markups":[{"type":10,"start":46,"end":49}]},{"name":"66ab","type":11,"text":"","markups":[],"layout":1,"iframe":{"mediaResourceId":"6c4490496a96626c573526f2b047887b","thumbnailUrl":"https://i.embed.ly/1/image?url=https%3A%2F%2Favatars0.githubusercontent.com%2Fu%2F46275%3Fs%3D400%26v%3D4&key=a19fcc184b9711e1b4764040d3dc5c07"}},{"name":"51a9","type":1,"text":"This does work and is fine for some use cases. Let’s consider a slightly different example. Say we only want to include an entry point if a corresponding JSON file exists. That means we’re not doing a simple 1–1 mapping. Using only spreads, we get something like:","markups":[]},{"name":"e4c3","type":11,"text":"","markups":[],"layout":1,"iframe":{"mediaResourceId":"6be0be5cc720b7c1efbf75d8d595cd47","thumbnailUrl":"https://i.embed.ly/1/image?url=https%3A%2F%2Favatars0.githubusercontent.com%2Fu%2F46275%3Fs%3D400%26v%3D4&key=a19fcc184b9711e1b4764040d3dc5c07"}},{"name":"8adf","type":1,"text":"This works too. But it starts to get harder and harder to translate the simple “if the file exists, do this” logic to a stream-based, higher-order functional style. There’s always some combination of map(), where() and maybe transform() that does the job, but it can feel like translating a haiku into Reverse Polish Notation.","markups":[{"type":10,"start":200,"end":205},{"type":10,"start":207,"end":214},{"type":10,"start":225,"end":236}]},{"name":"6e62","type":1,"text":"There is a cleaner solution, and it involves a key question: What is the body of these new if and for elements? In the examples I've shown you so far, it's always an expression. But there's no need to restrict it to just that. Instead, we allow any element to go there. In other words, all three of these new features can be composed freely. The above code can be expressed like:","markups":[{"type":10,"start":91,"end":93},{"type":10,"start":98,"end":101},{"type":2,"start":73,"end":77}]},{"name":"f12a","type":11,"text":"","markups":[],"layout":1,"iframe":{"mediaResourceId":"3f65104085fa082afd66f79093cdf509","thumbnailUrl":"https://i.embed.ly/1/image?url=https%3A%2F%2Favatars0.githubusercontent.com%2Fu%2F46275%3Fs%3D400%26v%3D4&key=a19fcc184b9711e1b4764040d3dc5c07"}},{"name":"ce15","type":1,"text":"A simple if inside a for, just like you'd do if you were writing imperative statements. The semantics for composing elements turn out to be pretty obvious:","markups":[{"type":10,"start":9,"end":11},{"type":10,"start":21,"end":24}]},{"name":"3e9a","type":9,"text":"An if element produces all of the values produced by its then clause if the condition is true, otherwise it produces all of the elements of the \"else\" clause. If there is no \"else\", it produces no elements.","markups":[{"type":10,"start":3,"end":5}]},{"name":"6380","type":9,"text":"A for element produces the concatenation of all of the values produced by its body element each time the body is executed.","markups":[{"type":10,"start":2,"end":5}]},{"name":"88b1","type":1,"text":"This enables some patterns that I think are cool. An obvious problem you run into is wanting to include or omit multiple values based on a single condition. So, say in our previous example we wanted to skip both the title and the search box on Android. You can do that by wrapping a spread in an if:","markups":[{"type":10,"start":296,"end":298},{"type":2,"start":112,"end":121}]},{"name":"4923","type":11,"text":"","markups":[],"layout":1,"iframe":{"mediaResourceId":"21a614632be7c22f8a6c05cb6347e0d5","thumbnailUrl":"https://i.embed.ly/1/image?url=https%3A%2F%2Favatars0.githubusercontent.com%2Fu%2F46275%3Fs%3D400%26v%3D4&key=a19fcc184b9711e1b4764040d3dc5c07"}},{"name":"a9fd","type":1,"text":"The spread is necessary here to unpack the inner list. Otherwise, when not on Android, you’d include the entire inner list as a single value. (We considered implicitly flattening in cases like this based on static types, but that gets really dubious when you think about how things like a List<Object> should behave.)","markups":[{"type":10,"start":289,"end":301}]},{"name":"cad6","type":1,"text":"You can think of spreading a list literal as the element equivalent of a curly block for statements — it lets you put multiple elements in a place where only one is expected. (If you’re familiar with the comma operator, that’s essentially the analogous form for expressions. Parallels everywhere.)","markups":[{"type":3,"start":204,"end":218,"href":"https://en.wikipedia.org/wiki/Comma_operator","title":"","rel":"nofollow","anchorType":0}]},{"name":"b932","type":1,"text":"Using for and if in an empty collection literal gives you a syntax not too far from the special \"list comprehension\" syntax supported by some other languages like Python:","markups":[{"type":10,"start":6,"end":9},{"type":10,"start":14,"end":16}]},{"name":"39bd","type":11,"text":"","markups":[],"layout":1,"iframe":{"mediaResourceId":"071a6300aec81fd8cb8066169f280068","thumbnailUrl":"https://i.embed.ly/1/image?url=https%3A%2F%2Favatars0.githubusercontent.com%2Fu%2F46275%3Fs%3D400%26v%3D4&key=a19fcc184b9711e1b4764040d3dc5c07"}},{"name":"9895","type":1,"text":"You can even nest for:","markups":[{"type":10,"start":18,"end":21}]},{"name":"937e","type":11,"text":"","markups":[],"layout":1,"iframe":{"mediaResourceId":"0d61512589198c681d9f6b6bd08a6c36","thumbnailUrl":"https://i.embed.ly/1/image?url=https%3A%2F%2Favatars0.githubusercontent.com%2Fu%2F46275%3Fs%3D400%26v%3D4&key=a19fcc184b9711e1b4764040d3dc5c07"}},{"name":"3984","type":1,"text":"This builds a list containing the Cartesian product of all of the points in the given hor and vert rectangle.","markups":[{"type":10,"start":86,"end":89},{"type":10,"start":94,"end":98},{"type":3,"start":34,"end":51,"href":"https://en.wikipedia.org/wiki/Cartesian_product","title":"","rel":"nofollow","anchorType":0}]},{"name":"9756","type":1,"text":"Also, these new features compose across collection types. I’ve been using lists as the example because they come up most often, but all of these features work inside maps and sets too. The only difference is that with sets, duplicates get implicitly discarded. And in maps, instead of having primitive expression elements, the basic element is a key/value pair. For example, this:","markups":[]},{"name":"7030","type":11,"text":"","markups":[],"layout":1,"iframe":{"mediaResourceId":"b76aab5cac32dbdb7f2772566dc2600a","thumbnailUrl":"https://i.embed.ly/1/image?url=https%3A%2F%2Favatars0.githubusercontent.com%2Fu%2F46275%3Fs%3D400%26v%3D4&key=a19fcc184b9711e1b4764040d3dc5c07"}},{"name":"80c4","type":1,"text":"Can be rewritten as:","markups":[]},{"name":"1713","type":11,"text":"","markups":[],"layout":1,"iframe":{"mediaResourceId":"ab1615741e3e7145102bf701b7f4f876","thumbnailUrl":"https://i.embed.ly/1/image?url=https%3A%2F%2Favatars0.githubusercontent.com%2Fu%2F46275%3Fs%3D400%26v%3D4&key=a19fcc184b9711e1b4764040d3dc5c07"}},{"name":"f552","type":1,"text":"One real concern we have with all of these features is that we’re essentially giving you new ways to express things you can already express today. This has a cost because it means users need to spend brain juice deciding which feature to use, and when reading others’ code, they may spend time questioning why one option was chosen over the other. There are simply more features to learn and the language is bigger.","markups":[{"type":3,"start":212,"end":241,"href":"https://en.wikipedia.org/wiki/Hick%27s_law","title":"","rel":"nofollow","anchorType":0},{"type":2,"start":221,"end":226}]},{"name":"510d","type":1,"text":"We spent a lot of time agonizing over this. Sometimes, simply doing nothing is the best design. Simplicity has a lot of value, and it’s rare that you get the chance to make a language simpler over time. However, after looking at a lot of code and working with a delightful UX researcher on a study, we’re fairly confident that these features are lightweight and useful enough to carry their weight.","markups":[{"type":3,"start":23,"end":42,"href":"https://github.com/munificent/ui-as-code/blob/master/Choices.md","title":"","rel":"","anchorType":0}]},{"name":"8952","type":1,"text":"As with any language change, you never really know how it will work out until it gets into the hands of users. These features should fall into your grasp in the upcoming Dart 2.3 release, and I’m really excited to see what you make of them.","markups":[]}],"sections":[{"name":"aeaf","startIndex":0}]},"postDisplay":{"coverless":true}},"virtuals":{"statusForCollection":"APPROVED","allowNotes":true,"previewImage":{"imageId":"1*4PIeARfthvxtn0cvBB5MPw.jpeg","filter":"","backgroundSize":"","originalWidth":2048,"originalHeight":1220,"strategy":"resample","height":0,"width":0},"wordCount":3623,"imageCount":1,"readingTime":13.871698113207547,"subtitle":"On the Dart team, we are busy implementing a handful of language changes that I’m really excited about. They all relate to collection…","userPostRelation":{"userId":"8b6a7f6f197d","postId":"f1ccaf9f546c","readAt":1627765465450,"readLaterAddedAt":0,"votedAt":1627765471593,"collaboratorAddedAt":0,"notesAddedAt":0,"subscribedAt":0,"lastReadSectionName":"aeaf","lastReadVersionId":"1038799b47db","lastReadAt":1627765446276,"lastReadParagraphName":"f552","lastReadPercentage":0,"viewedAt":1627764823284,"presentedCountInResponseManagement":0,"clapCount":4,"seriesUpdateNotifsOptedInAt":0,"queuedAt":0,"seriesFirstViewedAt":0,"presentedCountInStream":9,"seriesLastViewedAt":0,"audioProgressSec":0},"publishedInCount":1,"usersBySocialRecommends":[],"noIndex":false,"recommends":524,"isBookmarked":false,"tags":[{"slug":"programming","name":"Programming","postCount":400575,"metadata":{"postCount":400575,"coverImage":{"id":"0*7x-LQAg1xBmi-L1p","originalWidth":1800,"originalHeight":1169,"alt":"Screenshot of a desktop with the Cursor application open"}},"type":"Tag"},{"slug":"dart","name":"Dart","postCount":13858,"metadata":{"postCount":13858,"coverImage":{"id":"1*rQugDrmwFFsEDL_CqSBJNw.png","originalWidth":1536,"originalHeight":1024,"isFeatured":true}},"type":"Tag"},{"slug":"flutter","name":"Flutter","postCount":43303,"metadata":{"postCount":43303,"coverImage":{"id":"1*8zlpgRA1agpvWp-OiFKlJw.png","originalWidth":1536,"originalHeight":1024,"isFeatured":true}},"type":"Tag"},{"slug":"programming-languages","name":"Programming Languages","postCount":14860,"metadata":{"postCount":14860,"coverImage":{"id":"1*sD09-ccQCGBvaNKvzpbTbw.png","originalWidth":1690,"originalHeight":964,"isFeatured":true}},"type":"Tag"},{"slug":"ui","name":"UI","postCount":51366,"metadata":{"postCount":51366,"coverImage":{"id":"1*C8RVDKs_uZrVUdgpsF6Fmw.png","originalWidth":1929,"originalHeight":960,"isFeatured":true,"alt":"An example of a perfect, human designed dashboard interface for desktop and mobile phone"}},"type":"Tag"}],"socialRecommendsCount":0,"responsesCreatedCount":20,"links":{"entries":[{"url":"https://en.wikipedia.org/wiki/Comma_operator","alts":[],"httpStatus":200},{"url":"https://en.wikipedia.org/wiki/Icon_(programming_language)#Generators","alts":[],"httpStatus":200},{"url":"https://en.wikipedia.org/wiki/Expression-oriented_programming_language","alts":[],"httpStatus":200},{"url":"https://en.wikipedia.org/wiki/Hick%27s_law","alts":[],"httpStatus":200},{"url":"https://en.wikipedia.org/wiki/Cartesian_product","alts":[],"httpStatus":200},{"url":"https://en.wikipedia.org/wiki/Lisp_(programming_language)","alts":[],"httpStatus":200},{"url":"https://angular.io/","alts":[],"httpStatus":200},{"url":"https://reactjs.org/","alts":[],"httpStatus":200},{"url":"https://reactjs.org/docs/introducing-jsx.html","alts":[],"httpStatus":200},{"url":"https://flutter.dev/","alts":[],"httpStatus":200},{"url":"https://www.dartlang.org/articles/language/beyond-async#generators","alts":[],"httpStatus":200},{"url":"https://www.dartlang.org/","alts":[],"httpStatus":200},{"url":"https://github.com/munificent/ui-as-code/blob/master/Motivation.md","alts":[],"httpStatus":200},{"url":"https://github.com/munificent/ui-as-code","alts":[],"httpStatus":200},{"url":"https://api.dartlang.org/stable/2.2.0/dart-core/Iterable-class.html","alts":[],"httpStatus":200},{"url":"https://github.com/munificent/ui-as-code/blob/master/in-progress/parameter-freedom.md","alts":[],"httpStatus":200},{"url":"https://www.eskimo.com/~scs/cclass/notes/sx3a.html","alts":[],"httpStatus":200},{"url":"https://github.com/munificent/ui-as-code/blob/master/Choices.md","alts":[],"httpStatus":200},{"url":"https://github.com/dart-lang/language/blob/master/accepted/future-releases/spread-collections/feature-specification.md","alts":[],"httpStatus":200},{"url":"https://news.dartlang.org/2012/02/method-cascades-in-dart-posted-by-gilad.html","alts":[],"httpStatus":200}],"version":"0.3","generatedAt":1553024180698},"isLockedPreviewOnly":false,"metaDescription":"","totalClapCount":4873,"sectionCount":1,"readingList":0,"topics":[{"topicId":"decb52b64abf","slug":"programming","createdAt":1493934116328,"deletedAt":0,"image":{"id":"1*iPa136b1cGEO7lvoXg6uHQ@2x.jpeg","originalWidth":6016,"originalHeight":4016},"name":"Programming","description":"The good, the bad, the buggy.","relatedTopics":[],"visibility":1,"relatedTags":[],"relatedTopicIds":[],"seoTitle":"Programming News and Articles — Medium","type":"Topic"}]},"coverless":true,"slug":"making-dart-a-better-language-for-ui","translationSourcePostId":"","translationSourceCreatorId":"","isApprovedTranslation":false,"inResponseToPostId":"","inResponseToRemovedAt":0,"isTitleSynthesized":false,"allowResponses":true,"importedUrl":"https://gist.github.com/munificent/ddc4e79ace90718643c60837270c409a","importedPublishedAt":0,"visibility":0,"uniqueSlug":"making-dart-a-better-language-for-ui-f1ccaf9f546c","previewContent":{"bodyModel":{"paragraphs":[{"name":"previewImage","type":4,"text":"","layout":10,"metadata":{"id":"1*4PIeARfthvxtn0cvBB5MPw.jpeg","originalWidth":2048,"originalHeight":1220,"isFeatured":true}},{"name":"7295","type":3,"text":"Making Dart a Better Language for UI","markups":[],"alignment":1},{"name":"e0cc","type":1,"text":"On the Dart team, we are busy implementing a handful of language changes that I’m really…","markups":[{"type":3,"start":7,"end":11,"href":"https://www.dartlang.org/","title":"","rel":"","anchorType":0}],"alignment":1}],"sections":[{"startIndex":0}]},"isFullContent":false,"subtitle":"On the Dart team, we are busy implementing a handful of language changes that I’m really excited about. They all relate to collection…"},"license":0,"inResponseToMediaResourceId":"","canonicalUrl":"https://blog.dart.dev/making-dart-a-better-language-for-ui-f1ccaf9f546c","approvedHomeCollectionId":"23738d481ce8","isNewsletter":false,"newsletterId":"","webCanonicalUrl":"https://gist.github.com/munificent/ddc4e79ace90718643c60837270c409a","mediumUrl":"https://blog.dart.dev/making-dart-a-better-language-for-ui-f1ccaf9f546c","migrationId":"","notifyFollowers":true,"notifyTwitter":false,"notifyFacebook":false,"responseHiddenOnParentPostAt":0,"isSeries":false,"isSubscriptionLocked":false,"seriesLastAppendedAt":0,"audioVersionDurationSec":0,"sequenceId":"","isEligibleForRevenue":false,"isBlockedFromHightower":false,"deletedAt":0,"lockedPostSource":0,"hightowerMinimumGuaranteeStartsAt":0,"hightowerMinimumGuaranteeEndsAt":0,"featureLockRequestAcceptedAt":0,"mongerRequestType":1,"layerCake":4,"socialTitle":"","socialDek":"","editorialPreviewTitle":"","editorialPreviewDek":"","curationEligibleAt":0,"isProxyPost":false,"proxyPostFaviconUrl":"","proxyPostProviderName":"","proxyPostType":0,"isSuspended":false,"isLimitedState":false,"seoTitle":"","previewContent2":{"bodyModel":{"paragraphs":[{"name":"7295","type":3,"text":"Making Dart a Better Language for UI","markups":[]},{"name":"55ae","type":4,"text":"","markups":[],"layout":1,"metadata":{"id":"1*4PIeARfthvxtn0cvBB5MPw.jpeg","originalWidth":2048,"originalHeight":1220,"isFeatured":true}},{"name":"e0cc","type":1,"text":"On the Dart team, we are busy implementing a handful of language changes that I’m really excited about. They all relate to collection literals, the built-in syntax for creating lists, maps, and sets:","markups":[{"type":3,"start":7,"end":11,"href":"https://www.dartlang.org/","title":"","rel":"","anchorType":0}]},{"name":"1750","type":11,"text":"","markups":[],"layout":1,"iframe":{"mediaResourceId":"9a301b4329f5856c288f1bdf646f4dfa","thumbnailUrl":"https://i.embed.ly/1/image?url=https%3A%2F%2Favatars0.githubusercontent.com%2Fu%2F46275%3Fs%3D400%26v%3D4&key=a19fcc184b9711e1b4764040d3dc5c07"}},{"name":"55d1","type":1,"text":"If you aren’t writing Dart code today, this may not be super relevant to you and…","markups":[]}],"sections":[{"name":"aeaf","startIndex":0}]},"isFullContent":false,"subtitle":"On the Dart team, we are busy implementing a handful of language changes that I’m really excited about. They all relate to collection…"},"cardType":0,"isDistributionAlertDismissed":false,"isShortform":false,"shortformType":0,"responsesLocked":false,"isLockedResponse":false,"isPublishToEmail":false,"responseDistribution":0,"isMarkedPaywallOnly":false,"type":"Post"},"mentionedUsers":[],"collaborators":[{"user":{"userId":"59a5b43ec048","name":"Tim Sneath","username":"timsneath","createdAt":1454574250504,"imageId":"1*4HRhyWLOwtZEN7MQ8zLuHA.jpeg","backgroundImageId":"","bio":"Director for Developer Tools and Frameworks at Apple. I used to run Flutter and Dart at Google.","twitterScreenName":"timsneath","allowNotes":1,"mediumMemberAt":0,"isWriterProgramEnrolled":true,"isSuspended":false,"isMembershipTrialEligible":true,"facebookDisplayName":"","optInToIceland":true,"subdomainCreatedAt":1609442908161,"hasCompletedProfile":false,"userDismissableFlags":[1,2,3,5,8,12,18,21,29,32,33,47,58],"hasSeenIcelandOnboarding":true,"postSubscribeMembershipUpsellShownAt":0,"languageCode":"en-us","type":"User"},"state":"visible"}],"hideMeter":false,"shareKey":"0b230c314e3daff6865f4274f1ce355d","collectionUserRelations":[{"collectionId":"23738d481ce8","userId":"8b6a7f6f197d","role":"ADMIN"},{"collectionId":"4da7dfd21a33","userId":"8b6a7f6f197d","role":"WRITER"},{"collectionId":"24d8f4fa8912","userId":"8b6a7f6f197d","role":"WRITER"}],"mode":"canEdit","references":{"User":{"9e0692285f8b":{"userId":"9e0692285f8b","name":"Bob Nystrom","username":"munificentbob","createdAt":1470154715067,"imageId":"0*F3n6Gi_e0RL-D9dg.","backgroundImageId":"","bio":"","twitterScreenName":"","socialStats":{"userId":"9e0692285f8b","usersFollowedCount":11,"usersFollowedByCount":382,"type":"SocialStats"},"social":{"userId":"8b6a7f6f197d","targetUserId":"9e0692285f8b","isFollowing":true,"isTwitterFollowing":false,"isFacebookFollowing":false,"isMediumFollowing":true,"type":"Social"},"allowNotes":1,"mediumMemberAt":0,"isWriterProgramEnrolled":true,"isSuspended":false,"isMembershipTrialEligible":true,"facebookDisplayName":"","optInToIceland":true,"hasCompletedProfile":false,"userDismissableFlags":[2,53,56,58],"hasSeenIcelandOnboarding":false,"postSubscribeMembershipUpsellShownAt":0,"languageCode":"en-us","type":"User"}},"Collection":{"23738d481ce8":{"id":"23738d481ce8","name":"Dart","slug":"dartlang","tags":["MOBILE APP DEVELOPMENT","WEB DEVELOPMENT","DART","PROGRAMMING LANGUAGES","SOFTWARE DEVELOPMENT"],"creatorId":"a6d788faa5e5","description":"Dart is an approachable, portable, and productive language for high-quality apps on any platform. Learn more at https://dart.dev.","shortDescription":"Dart is an approachable, portable, and productive language…","image":{"imageId":"1*uWy1Ajpd0oTUQBO9WBHoQg@2x.png","filter":"","backgroundSize":"","originalWidth":1001,"originalHeight":1001,"strategy":"resample","height":0,"width":0},"metadata":{"followerCount":14031,"activeAt":1762974121956},"virtuals":{"permissions":{"canPublish":true,"canPublishAll":true,"canRepublish":true,"canRemove":true,"canManageAll":true,"canSubmit":true,"canEditPosts":true,"canAddWriters":true,"canViewStats":true,"canSendNewsletter":true,"canViewLockedPosts":true,"canViewCloaked":true,"canEditOwnPosts":true,"canBeAssignedAuthor":true,"canEnrollInHightower":false,"canLockPostsForMediumMembers":false,"canLockOwnPostsForMediumMembers":false,"canViewNewsletterV2Stats":true,"canCreateNewsletterV3":true},"isSubscribed":true,"isEnrolledInHightower":false,"isEligibleForHightower":false,"isSubscribedToCollectionEmails":false,"isMuted":false,"canToggleEmail":false,"isWriter":false},"logo":{"imageId":"1*NRb7RFVWJQFzY47j3v4U7Q.png","filter":"","backgroundSize":"","originalWidth":400,"originalHeight":154,"strategy":"resample","height":0,"width":0},"twitterUsername":"dart_lang","publicEmail":"medium@dartlang.org","domain":"blog.dart.dev","sections":[{"type":2,"collectionHeaderMetadata":{"title":"Dart","description":"An approachable, portable, and productive language for high-quality apps on any platform","backgroundImage":{},"logoImage":{"id":"1*knHF_qpxdtS8h0Z8EeqowA@2x.png","originalWidth":1080,"originalHeight":1080,"alt":"Dart"},"alignment":2,"layout":5}},{"type":1,"postListMetadata":{"source":1,"layout":4,"number":7,"postIds":[]}},{"type":1,"postListMetadata":{"source":1,"layout":5,"number":15,"postIds":[]}}],"tintColor":"#FF042B59","lightText":true,"favicon":{"imageId":"","filter":"","backgroundSize":"","originalWidth":0,"originalHeight":0,"strategy":"resample","height":0,"width":0},"colorPalette":{"defaultBackgroundSpectrum":{"colorPoints":[{"color":"#FF6588BA","point":0},{"color":"#FF607EAB","point":0.1},{"color":"#FF59759C","point":0.2},{"color":"#FF536B8E","point":0.3},{"color":"#FF4C617F","point":0.4},{"color":"#FF445670","point":0.5},{"color":"#FF3D4B61","point":0.6},{"color":"#FF344052","point":0.7},{"color":"#FF2B3442","point":0.8},{"color":"#FF212832","point":0.9},{"color":"#FF161A22","point":1}],"backgroundColor":"#FFFFFFFF"},"tintBackgroundSpectrum":{"colorPoints":[{"color":"#FF042B59","point":0},{"color":"#FF294871","point":0.1},{"color":"#FF456087","point":0.2},{"color":"#FF5F779B","point":0.3},{"color":"#FF788DAD","point":0.4},{"color":"#FF8FA2BF","point":0.5},{"color":"#FFA5B6CF","point":0.6},{"color":"#FFBBC9DF","point":0.7},{"color":"#FFD1DCEE","point":0.8},{"color":"#FFE6EEFC","point":0.9},{"color":"#FFFBFFFF","point":1}],"backgroundColor":"#FF042B59"},"highlightSpectrum":{"colorPoints":[{"color":"#FFECF3FF","point":0},{"color":"#FFE9F2FF","point":0.1},{"color":"#FFE5F0FF","point":0.2},{"color":"#FFE2EFFF","point":0.3},{"color":"#FFDEEDFF","point":0.4},{"color":"#FFDBEBFF","point":0.5},{"color":"#FFD7EAFF","point":0.6},{"color":"#FFD3E8FF","point":0.7},{"color":"#FFCFE6FF","point":0.8},{"color":"#FFCBE5FF","point":0.9},{"color":"#FFC8E3FF","point":1}],"backgroundColor":"#FFFFFFFF"},"darkBackgroundSpectrum":{"colorPoints":[{"color":"#FF7DA0D3","point":0},{"color":"#FF89A9D8","point":0.1},{"color":"#FF94B1DC","point":0.2},{"color":"#FFA0B9E0","point":0.3},{"color":"#FFABC1E3","point":0.4},{"color":"#FFB6C9E7","point":0.5},{"color":"#FFC0D1EB","point":0.6},{"color":"#FFCBD8EF","point":0.7},{"color":"#FFD5E0F2","point":0.8},{"color":"#FFE0E7F6","point":0.9},{"color":"#FFEAEFFA","point":1}],"backgroundColor":"#FF000000"}},"navItems":[{"type":1,"title":"Announcements","tagSlug":"announcements","url":"https://blog.dart.dev/tagged/announcements","source":"tagSlug"},{"type":5,"title":"Archive","url":"https://blog.dart.dev/archive"},{"type":3,"title":"dart.dev","url":"https://dart.dev"}],"colorBehavior":2,"collectionFeatures":[25],"ampLogo":{"imageId":"","filter":"","backgroundSize":"","originalWidth":0,"originalHeight":0,"strategy":"resample","height":0,"width":0},"header":{"title":"Dart","description":"An approachable, portable, and productive language for high-quality apps on any platform","backgroundImage":{},"logoImage":{"id":"1*knHF_qpxdtS8h0Z8EeqowA@2x.png","originalWidth":1080,"originalHeight":1080,"alt":"Dart"},"alignment":2,"layout":5},"subscriberCount":14031,"tagline":"Dart is a client-optimized language for fast apps on any platform.","isOptedIntoAurora":false,"isCurationAllowedByDefault":false,"polarisCoverImage":{"imageId":"","filter":"","backgroundSize":"","originalWidth":0,"originalHeight":0,"strategy":"resample","height":0,"width":0},"ptsQualifiedAt":1616092887098,"type":"Collection"}},"Social":{"9e0692285f8b":{"userId":"8b6a7f6f197d","targetUserId":"9e0692285f8b","isFollowing":true,"isTwitterFollowing":false,"isFacebookFollowing":false,"isMediumFollowing":true,"type":"Social"}},"SocialStats":{"9e0692285f8b":{"userId":"9e0692285f8b","usersFollowedCount":11,"usersFollowedByCount":382,"type":"SocialStats"}}}},"v":3,"b":"20260130-1012-root"}